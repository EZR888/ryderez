var VER="5.1.3",DEBUG=!1,UNDEF="undefined",NOLINK="javascript:void(0)",LOCAL=0===location.protocol.indexOf("file:"),TOUCH_START="touchstart",TOUCH_MOVE="touchmove",TOUCH_END="touchend",LOCALSTORAGE=function(){try{return localStorage.setItem("_t",VER),localStorage.removeItem("_t"),!0}catch(b){return!1}}(),VEND=function(b){return 0<b.indexOf("Trident")?"ms":0<b.indexOf("AppleWebKit")?"webkit":0<b.indexOf("Gecko")?"moz":0<b.indexOf("Presto")?"o":0<b.indexOf("Blink")?"webkit":""}(navigator.userAgent);
String.wsp=[];String.wsp[9]=!0;String.wsp[10]=!0;String.wsp[11]=!0;String.wsp[12]=!0;String.wsp[13]=!0;String.wsp[32]=!0;String.wsp[133]=!0;String.wsp[160]=!0;String.wsp[5760]=!0;String.wsp[6158]=!0;String.wsp[8192]=!0;String.wsp[8193]=!0;String.wsp[8194]=!0;String.wsp[8195]=!0;String.wsp[8196]=!0;String.wsp[8197]=!0;String.wsp[8198]=!0;String.wsp[8199]=!0;String.wsp[8200]=!0;String.wsp[8201]=!0;String.wsp[8202]=!0;String.wsp[8203]=!0;String.wsp[8232]=!0;String.wsp[8233]=!0;String.wsp[8239]=!0;
String.wsp[8287]=!0;String.wsp[12288]=!0;String.prototype.trim=function(){var b=this+"",a=b.length;if(a){var c=String.wsp,d=0;for(--a;0<=a&&c[b.charCodeAt(a)];)--a;for(++a;d<a&&c[b.charCodeAt(d)];)++d;b=b.substring(d,a)}return b};String.prototype.trunc=function(b){var a=this+"";if(a.length<=b)return a.toString();b=a.substring(0,b-1);a=b.lastIndexOf(" ");return(6<a&&20>b.length-a?b.substring(0,a):b)+"..."};String.prototype.startsWith=function(b){return 0===(this+"").indexOf(b)};
String.prototype.endsWith=function(b){return(this+"").substring(this.length-b.length)===b};String.prototype.getExt=function(){var b=this+"",a=b.lastIndexOf(".");return 0>=a||a>=b.length-1?"":b.substring(a+1).toLowerCase()};String.prototype.replaceExt=function(b){var a=this+"",c=a.lastIndexOf(".");return 0>=c?a:a.substring(0,c+1)+b};String.prototype.fixExtension=function(){return(this+"").replace(/.gif$/gi,".png").replace(/.tif+$/gi,".jpg")};
String.prototype.getDir=function(){var b=(this+"").split("#")[0];return b.substring(0,b.lastIndexOf("/")+1)};String.prototype.getFile=function(){var b=(this+"").split("#")[0];return b.substring(b.lastIndexOf("/")+1)};String.prototype.getRelpath=function(b){var a=this+"",c=a.lastIndexOf("#");for(-1===c?c=a.length-1:c--;0<=c&&!("/"===a[c]&&0===b--);c--);return a.substring(c+1)};
String.prototype.fixUrl=function(){for(var b,a,c=this+"";0<(b=c.indexOf("../"));){if(1===b||-1===(a=c.lastIndexOf("/",b-2)))return c.substring(b+3);c=c.substring(0,a)+c.substring(b+2)}return c};String.prototype.fullUrl=function(){var b=this+"";b.match(/^(http|ftp|file)/)||(b=window.location.href.getDir()+b);return b.fixUrl()};
String.prototype.cleanupHTML=function(){for(var b=[[/<br>/gi,"\n"],[/\&amp;/gi,"&"],[/\&lt;/gi,"<"],[/\&gt;/gi,">"],[/\&(m|n)dash;/gi,"-"],[/\&apos;/gi,"'"],[/\&quot;/gi,'"']],a=this+"",c=b.length-1;0<=c;c--)a=a.replace(b[c][0],b[c][1]);return a};String.prototype.stripHTML=function(){return(this+"").replace(/<\/?[^>]+>/gi,"")};String.prototype.stripQuote=function(){return(this+"").replace(/\"/gi,"&quot;")};String.prototype.appendSep=function(b,a){return(this.length?this+(a||" &middot; "):"")+b};
String.prototype.rgb2hex=function(){var b=this+"";if("#"===b.charAt(0)||"transparent"===b)return b;var a=b.match(/\d+/g),c="";if(a){for(var d=0;d<a.length&&3>d;d++)b=parseInt(a[d],10).toString(16),c+=(2>b.length?"0":"")+b;return"#"+c}return"transparent"};String.prototype.template=function(b){if(!b||!this)return this;for(var a=this+"",c=0;c<b.length;c++)a=a.replace(RegExp("\\{"+c+"\\}","gi"),b[c]);return a};Math.minMax=function(b,a,c){a=isNaN(a)?parseFloat(a):a;return a<b?b:a>c?c:a};
var getCoords=function(b){return b.touches&&0<b.touches.length?{x:Math.round(b.touches[0].clientX),y:Math.round(b.touches[0].clientY)}:null!==b.clientX?{x:Math.round(b.clientX),y:Math.round(b.clientY)}:null},noAction=function(b){b.preventDefault();return!1},fixFbComments=function(b){var a=window.location.href;-1===a.indexOf("?fb_comment_id=")?(a=a.split("#")[0],b&&"/"===a[a.length-1]&&(a+=b)):a=a.split("?")[0];document.getElementById("fb-comments").setAttribute("data-href",a)},initMobile=function(){if(/Mobile/.test(navigator.userAgent)&&
!(980<screen.width||980<screen.height||window.innerWidth!==document.documentElement.clientWidth&&window.innerWidth-1!==document.documentElement.clientWidth)){var b=function(){window.hasOwnProperty("pageYOffset")&&window.scrollTo(0,window.pageYOffset+1);return!0};setTimeout(function(){b()},1E3);$(window).on("orientationchange",b)}},log=function(){};
(function(b){var a,c=!1,d,e=1;log=function(h){DEBUG&&!c&&(a||(a=b('<div id="log" style="position:fixed;left:0;top:0;width:200px;bottom:0;overflow:auto;padding:10px;background-color:rgba(0,0,0,0.5);color:#fff;font-size:15px;z-index:99999"></div>').hover(function(){c=!0},function(){c=!1}).appendTo("body")),h===d?a.children(":first").empty().html(d+" ("+ ++e+")"):(b('<div style="height:2em;overflow:hidden;">'+h+"</div>").prependTo(a),d=h,e=1))};b.fn.logEvents=function(a){if(DEBUG){var c=a||"mousedown mouseup mouseover mouseout mousewheel dragstart click blur focus load unload reset submit change abort cut copy paste selection drag drop orientationchange touchstart touchmove touchend touchcancel MSPointerDown MSPointerMove MSPointerUp gesturestart gesturechange gestureend";
return this.each(function(){b(this).on(c,function(a){typeof a===UNDEF?log("Undefined event"):a.target?"log"!==a.target.id&&log(a.type+' <span style="padding:0 4px;font-size:0.8em;background-color:#000;border-radius:4px;"><b>'+(a.target.nodeName?a.target.nodeName.toLowerCase():"???")+"</b>"+(a.target.id?":"+a.target.id:"")+"</span>"+(a.relatedTarget?' <span style="padding:0 4px;font-size:0.8em;background-color:#800;border-radius:4px;"><b>'+a.relatedTarget.nodeName.toLowerCase()+"</b>"+(a.relatedTarget.id?
":"+a.relatedTarget.id:"")+"</span>":"")):log("No event target!");return!0})})}};b.fn.logCss=function(a,c,d){if(DEBUG){d=d||20;c=c||2E3;var e=new Date;return this.each(function(){var m=b(this),k=function(a){var b=new Date-e;log(b+"&nbsp;::&nbsp;"+a+" = "+m.css(a));b>c&&clearInterval(p)},p=setInterval(function(){if(b.isArray(a))for(var c=0;c<a.length;c++)k(a[c]);else k(a)},d)})}}})(jQuery);
var translate=function(b,a){b=b.trim();if(typeof Texts!==UNDEF&&Texts.hasOwnProperty(b))return Texts[b];if(typeof a!==UNDEF)return DEBUG&&console&&console.log("Using default translation: "+b+"="+a),a;DEBUG&&console&&console.log("Missing translation: "+b);var c=b.replace(/([A-Z])/g," $1").toLowerCase();c[0]=c.charAt(0).toUpperCase();return c},getKeys=function(b,a){var c={},d,e=b.split(","),h=e.length;for(d=0;d<h;d++)c[e[d]]=translate(e[d],a[e]);return c},getTranslations=function(b){var a={},c;for(c in b)a[c]=
"object"===typeof b[c]?getTranslations(b[c]):translate(c,b[c]);return a},getRelativeDate=function(b){if(!b)return translate("today");if(1===b)return translate("yesterday");var a;730<=b?(a=translate("yearsAgo"),b=Math.floor(b/365)):60<=b?(a=translate("monthsAgo"),b=Math.floor(b/30.5)):a=translate("daysAgo");return a.replace("{0}",b)};
(function(b,a){/Trident/.test(navigator.userAgent)?/IEMobile/.test(navigator.userAgent)?(window.navigator.msPointerEnabled?(TOUCH_START="MSPointerDown",TOUCH_MOVE="MSPointerMove",TOUCH_END="MSPointerUp"):(TOUCH_START="pointerDown",TOUCH_MOVE="pointerMove",TOUCH_END="pointerUp"),a.touchMode=!0):a.touchMode=!1:(TOUCH_START="touchstart",TOUCH_MOVE="touchmove",TOUCH_END="touchend",a.touchMode=/(Chrome|CriOS)/.test(navigator.userAgent)?/Mobile/.test(navigator.userAgent):"ontouchstart"in window);var c=
"moz"===VEND?"transform":"-"+VEND+"-transform";b.fn.translate=function(a,e,h){return this.each(function(){h&&b(this).addClass(h).data("tr_cls",h);this.style[c]="translate("+(a||0)+"px,"+(e||0)+"px)";b(this).data({tr_x:a,tr_y:e})})};b.fn.translateToPos=function(){return this.each(function(){var a=b(this),e=a.data("tr_x")||0,h=a.data("tr_y")||0;if(e||h)e=a.position(),(h=a.data("tr_cls"))&&a.removeClass(h),this.style[c]="translate(0,0)",a.removeData("tr_x tr_y").css({left:e.left,top:e.top})})}})(jQuery,
document);
(function(){function b(){a&&(e(b),jQuery.fx.tick())}for(var a,c=0,d=["webkit","moz"],e=window.requestAnimationFrame,h=window.cancelAnimationFrame;c<d.length&&!e;c++)e=window[d[c]+"RequestAnimationFrame"],h=h||window[d[c]+"CancelAnimationFrame"]||window[d[c]+"CancelRequestAnimationFrame"];e?(window.requestAnimationFrame=e,window.cancelAnimationFrame=h,jQuery.fx.timer=function(c){c()&&(jQuery.timers.push(c)&&!a)&&(a=!0,b())},jQuery.fx.stop=function(){a=!1}):(window.requestAnimationFrame=function(a){var b=(new Date).getTime(),
d=Math.max(0,16-(b-c)),e=window.setTimeout(function(){a(b+d)},d);c=b+d;return e},window.cancelAnimationFrame=function(a){clearTimeout(a)})})(jQuery);
(function(b){var a=["DOMMouseScroll","mousewheel"];if(b.event.fixHooks)for(var c=a.length;c;)b.event.fixHooks[a[--c]]=b.event.mouseHooks;b.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var b=a.length;b;)this.addEventListener(a[--b],d,!1);else this.onmousewheel=d},teardown:function(){if(this.removeEventListener)for(var b=a.length;b;)this.removeEventListener(a[--b],d,!1);else this.onmousewheel=null}};b.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},
unmousewheel:function(a){return this.unbind("mousewheel",a)}});var d=function(a){var c=a||window.event,d=[].slice.call(arguments,1),g=0,n=0,m=0;a=b.event.fix(c);a.type="mousewheel";c.wheelDelta?g=c.wheelDelta/120:c.detail&&(g=-c.detail/3);m=g;void 0!==c.axis&&c.axis===c.HORIZONTAL_AXIS&&(m=0,n=-1*g);void 0!==c.wheelDeltaY&&(m=c.wheelDeltaY/120);void 0!==c.wheelDeltaX&&(n=-1*c.wheelDeltaX/120);d.unshift(a,g,n,m);return(b.event.dispatch||b.event.handle).apply(this,d)}})(jQuery);
(function(b){b.event.special.dbltap={setup:function(){b(this).on("touchend.dbltap",b.event.special.dbltap.handler)},teardown:function(){b(this).off("touchend.dbltap")},handler:function(a){var c=[].slice.call(arguments,1),d=b(a.target),e=(new Date).getTime(),h=e-(d.data("lastTouch")||0);if(5<h&&300>h)return a.preventDefault(),d.data("lastTouch",0),a=b.e.fix(a||window.event),a.type="dbltap",c.unshift(a),(b.e.dispatch||b.e.handle).apply(this,c);d.data("lastTouch",e);return!0}}})(jQuery);
(function(b){b.cookie=function(a,c,d){var e,h,j=function(a){return/^(true|yes)$/.test(a)?!0:/^(false|no)$/.test(a)?!1:/^([\d.]+)$/.test(a)?parseFloat(a):a};if(1<arguments.length)return h=new Date,null===c?LOCALSTORAGE?localStorage.removeItem(a):document.cookie=encodeURIComponent(a)+"=; expires="+h.toGMTString()+"; path=/":/^(string|number|boolean)$/.test(typeof c)&&(h.setTime(h.getTime()+1E3*("number"!==typeof d?3600:d)),LOCALSTORAGE?localStorage.setItem(a,String(c)+"; "+String(h.getTime())):document.cookie=
encodeURIComponent(a)+"="+String(c)+"; expires="+h.toGMTString()+"; path=/"),c;if(a)if(LOCALSTORAGE){if(e=localStorage.getItem(a))if(e=e.split("; "),b.isArray(e)&&1<e.length){h=new Date;if(h.getTime()<parseInt(e[1],10))return j(e[0]);localStorage.removeItem(a)}else return j(e)}else{e=document.cookie.split(";");a+="=";for(var g=0;g<e.length;g++)h=e[g].trim(),0===h.indexOf(a)&&(h=h.substring(a.length),j(h))}return null}})(jQuery);
(function(b){var a=-1===navigator.userAgent.indexOf("Firefox"),c={put:function(a,b){(b||window).location.hash=this.encoder(a)},get:function(b){b=(b||window).location.hash.replace(/^#/,"");try{return a?decodeURIComponent(b):b}catch(c){return b}},encoder:encodeURIComponent},d={base:{callback:void 0,type:void 0,check:function(){},load:function(){},init:function(a,d){var g;g=b.extend({unescape:!1},d||{});var n=g.unescape;if(!0===n)g=function(a){return a};else{if(g="string"===typeof n){g=n.split("");var m=
RegExp(b.map(g,encodeURIComponent).join("|"),"ig");g=n=function(a){return a.replace(m,decodeURIComponent)}}g=g||"function"===typeof n?function(a){return n(encodeURIComponent(a))}:encodeURIComponent}c.encoder=g;e.callback=a;e._options=d;e._init()},_init:function(){},_options:{}},timer:{_appState:void 0,_init:function(){var a=c.get();e._appState=a;e.callback(a);setInterval(e.check,100)},check:function(){var a=c.get();a!==e._appState&&(e._appState=a,e.callback(a))},load:function(a){a!==e._appState&&
(c.put(a),e._appState=a,e.callback(a))}},hashchangeEvent:{_init:function(){e.callback(c.get());b(window).on("hashchange",e.check)},check:function(){e.callback(c.get())},load:function(a){c.put(a)}}},e=b.extend({},d.base);e.type="onhashchange"in window?"hashchangeEvent":"timer";b.extend(e,d[e.type]);b.history=e})(jQuery);
(function(b){b.fn.addModal=function(a,c,d){var e=b(this);"string"===typeof a&&(a=b(a));if(a instanceof b&&a.length){b.isArray(c)||(d=c,c=null);d=b.extend({},b.fn.addModal.defaults,d);d.savePosition=d.savePosition&&typeof d.uid!==UNDEF;var h=getTranslations(b.fn.addModal.text);d.defaultButton&&(d.defaultButton=translate(d.defaultButton,"OK"));var j,g,n,m,k,p,l,r,q=0,w;d.uid&&b("#"+d.uid).parents("._m_window").remove();j=b("<div>",{"class":"_m_window",role:"modal"}).css({opacity:0}).appendTo(e);e.css({position:"relative"});
var x=function(){l=e.width();r=e.height()};x();b(window).on("resize",x);d.darkenBackground&&j.addClass("darken");g=b("<div>",{id:d.uid||"_mod_"+Math.floor(1E4*Math.random()),"class":"_m_panel "+d.type}).css({width:d.width}).appendTo(j);n=b("<header>",{"class":"_m_head"}).appendTo(g);n.append(b("<h5>",{text:d.title||("error"===d.type||"warning"===d.type?h[d.type]:"")}));("error"===d.type||"warning"===d.type)&&n.append(b("<span>",{"class":d.type,text:"!"}));var t=function(){m.trigger("removeTooltip");
w=clearTimeout(w);j.animate({opacity:0},d.speed,function(){j.remove()});return!1};j.on("destroy",t);if(d.blocking&&d.closeOnClickOut)j.on("click",function(a){if(b(a.target).hasClass("_m_window"))return t(a)});m=b("<a>",{href:NOLINK,"class":"close",html:"&times;"}).appendTo(n);document.touchMode?m[0].addEventListener(TOUCH_END,t):(m.on("click",t),m.addTooltip(h.closeWindow));h=function(a){a.preventDefault();var c=g.position().left,e=g.position().top,f=getCoords(a),j=l-g.width()-d.pad,q=r-g.height()-
d.pad,h=n.css("cursor");n.css({cursor:"move"});var p=function(a){a.preventDefault();a=getCoords(a);g.css({left:Math.minMax(d.pad,c+a.x-f.x,j),top:Math.minMax(d.pad,e+a.y-f.y,q)});return!1},m=function(a){a.preventDefault();b(document).off({mousemove:p,mouseup:m});n.css("cursor",h);d.savePosition&&y();return!1};if(document.touchMode)this.addEventListener(TOUCH_END,m),this.addEventListener(TOUCH_MOVE,p);else b(document).on({mousemove:p,mouseup:m});return!1};if(d.movable)if(document.touchMode)n[0].addEventListener(TOUCH_START,
h);else n.on("mousedown",h);k=b("<div>",{"class":"_m_cont"}).appendTo(g);p=b("<div>",{"class":"_m_cont_i"}).append(a).appendTo(k);!c&&d.defaultButton&&(c=[{t:d.defaultButton,h:t}]);if(c){var u,f=b("<div>",{"class":"buttons"}).appendTo(p),s=function(a){u.each(function(c){b(this).toggleClass("active",c===a)})},z=function(){b(document).off("keydown",v);t()},v=function(a){if(document.activeElement&&"input"===document.activeElement.nodeName||b.isFunction(d.enableKeyboard)&&!d.enableKeyboard())return!0;
a=a?a.keyCode:window.event.keyCode;if(27===a)return z(),!1;if(f){var c=f.find("a.active"),e=u.index(c);switch(a){case 13:case 10:b.isFunction(c[0].handler)&&!1!==c[0].handler.call(j)&&z();break;case 39:s((e+1)%u.length);break;case 37:s(e?e-1:u.length-1);break;default:return!0}return!1}return!0},x=function(a){a.preventDefault();a=a.target;b.isFunction(a.handler)&&!1!==a.handler.call(j,g)&&z();return!1};for(a=0;a<c.length;a++)a&&f.append(" "),h=b("<a>",{href:NOLINK,html:c[a].t}).on("click",x).appendTo(f),
b.isFunction(c[a].h)&&(h[0].handler=c[a].h);u=f.children("a");u.last().addClass("active");if(b.isFunction(d.enableKeyboard)||d.enableKeyboard)b(document).on("keydown",v)}if(d.resizable)if(n.on(document.touchMode?"dbltap":"dblclick",function(a){a.preventDefault();a=[g.position().left,g.position().top,g.width(),g.height()];var b=[d.pad,d.pad,l-2*d.pad,r-2*d.pad],c=function(a){g.css({left:Math.minMax(d.gap,a[0],l-a[2]-d.gap),top:Math.minMax(d.gap,a[1],r-a[3]-d.gap),width:a[2],height:a[3]});p.css({height:a[3]-
q})};a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]?c(g.data("wpos")):(c(b),g.data("wpos",a));d.savePosition&&y();return!1}),c=b("<a>",{"class":"resize"}).appendTo(g),a=function(a){a.preventDefault();var c=g.width(),e=g.height(),f=getCoords(a),h=j.width(),m=r-d.pad-g.position().top-q,h=l-d.pad-g.position().left,n=function(a){a.preventDefault();a=getCoords(a);var b=Math.min(Math.max(e+a.y-f.y-q,20),m);g.css({width:Math.min(Math.max(c+a.x-f.x,60),h),height:b+q});p.css({height:b});return!1},w=function(a){a.preventDefault();
b(document).off({mousemove:n,mouseup:w});d.savePosition&&y();return!1};if(document.touchMode)this.addEventListener(TOUCH_MOVE,n),this.addEventListener(TOUCH_END,w);else b(document).on({mousemove:n,mouseup:w});return!1},document.touchMode)c[0].addEventListener(TOUCH_START,a);else c.on("mousedown",a);var C=function(){var a=g.width(),b=g.height();q=b-p.height();a&&(b&&l&&r)&&(a+2*d.pad>l&&g.css({width:a=l-2*d.pad}),b+2*d.pad>r&&(g.css({height:b=r-2*d.pad}),p.css({height:r-2*d.pad-q})),g.css({left:Math.max(Math.round((l-
a)*d.pos[0]/2),d.pad),top:Math.max(Math.round((r-b)*d.pos[1]/2),d.pad)}))},y=function(){b.cookie("modalPosition"+d.uid,g.position().left+","+g.position().top+","+g.width()+","+g.height())},A=d.savePosition?b.cookie("modalPosition"+d.uid):null;j.css({opacity:0}).show();setTimeout(function(){if(A&&(A=A.split(","))&&b.isArray(A)&&3<A.length){var a=A,c=Math.minMax(d.pad,parseInt(a[0],10),l-d.pad-60),e=Math.minMax(d.pad,parseInt(a[1],10),r-d.pad-60),a=Math.minMax(120,parseInt(a[2],10),l-c-d.pad);(isNaN(c)||
isNaN(e)||isNaN(a))&&C();q=n.outerHeight()+parseInt(k.css("padding-top"),10)+parseInt(k.css("padding-bottom"),10)+parseInt(p.css("padding-top"),10)+parseInt(p.css("padding-bottom"),10)+parseInt(k.css("border-top-width"),10);g.css({position:"absolute",left:c,top:e,width:a});if(g.height()>(c=r-e-d.pad))g.css({height:c}),p.css({height:c-q})}else C();d.blocking||j.css({width:0,height:0,right:"auto",bottom:"auto",overflow:"visible"});j.animate({opacity:1},d.speed);d.savePosition&&y();d.autoFade&&(w=setTimeout(t,
d.autoFade));d.scrollIntoView&&setTimeout(function(){var a=p.children(":not(.buttons)").find(".active:first");a&&a.length&&p.scrollTop(Math.max(Math.floor(a.position().top)-50,0))},200)},40);return this}};b.fn.addModal.defaults={speed:300,autoFade:0,width:400,resizable:!1,movable:!0,blocking:!0,enableKeyboard:!0,closeOnClickOut:!0,darkenBackground:!0,savePosition:!1,scrollIntoView:!1,defaultButton:"okButton",pad:6,pos:[1,1],type:"normal"};b.fn.addModal.text={closeWindow:"Close window",error:"error",
warning:"warning"}})(jQuery);
(function(b){b.fn.addTooltip=function(a,c){a&&("string"!==typeof a&&!a.jquery)&&(c=a,a=null);id={tooltip:"tooltip"};c=b.extend({},b.fn.addTooltip.defaults,c);b.fn.hideAllTooltips=function(){b("."+c.className).hide()};return this.each(function(){var d=b(this),e,h,j,g=!1,n=!1,m,k=function(){j=clearTimeout(j);g=!0;e.finish().show()},p=function(){n||(clearTimeout(j),g=!1,j=setTimeout(q,100))},l=function(){h=clearTimeout(h);clearTimeout(j);g=!1;j=setTimeout(q,100)},r=function(){l();return!0},q=function(){!g&&
e&&e.stop(!0,!1).fadeOut(200,function(){e.hide()})},w=function(){var a=d.offset();a.top===m.top&&a.left===m.left&&e.fadeIn(300).alignTo(d,{pos:c.pos})},x=function(){if(e)e.stop(!0,!1),j=clearTimeout(j);else{var f;b:{if(f=a)if("string"===typeof f)f=b("<div>",{html:f}).appendTo("body");else if(f.jquery)f=b.contains(document.body,f[0])?f:f.appendTo("body");else{f=null;break b}else{(f=d.data(id.tooltip))?("."===f.charAt(0)?f=d.find(f):"#"===f.charAt(0)&&(f=b(f)),f.jquery&&f.removeClass("hidden")):(f=
d.attr("title"),d.removeAttr("title"));if(!f||!f.length){f=null;break b}f=b("<div>",{html:f}).appendTo("body")}f.addClass(c.className).hide()}(e=f)?(document.touchMode||(e.on("mouseover",k),e.on("mouseout",p)),e.find("input, textarea").on({focus:function(){n=!0;k()},blur:function(){n=!1}}),f=!0):f=!1;if(!f)return}m=d.offset();clearTimeout(h);h=setTimeout(w,c.delay);document.touchMode?(clearTimeout(j),j=setTimeout(q,c.stay)):g=!0},t=function(a){a.preventDefault();!e||e.is(":hidden")?x():(g=!1,l(),
"A"===d[0].nodeName&&((a=d.attr("href"))&&!a.startsWith("javascript:")?window.location.href=a:d.trigger("click")));return!1},u=function(a){a.preventDefault();a.stopPropagation()};d.on("removeTooltip",l);if(document.touchMode)this.addEventListener(TOUCH_START,t),this.addEventListener(TOUCH_END,u),this.addEventListener("click",u);else d.on({"focus mouseenter":x,"blur mouseleave":l,click:r})})};b.fn.addTooltip.defaults={delay:50,className:"hint",stay:2E3,pos:[1,2,1,0]}})(jQuery);
(function(b){b.fn.loadImages=function(a){a=b.extend({},b.fn.loadImages.defaults,a);return this.each(function(){var c=b(this),d=c.find(a.selector).eq(0)||c.children().eq(0);if(d.length&&c.is(":visible")&&d.is(":visible")){var e=d.find("img."+a.loadClass);if(e.length){var h="absolute"===d.css("position"),j=-(typeof a.left!==UNDEF?a.left:d.position().left-(h?0:c.scrollLeft()))-a.d,g=-(typeof a.top!==UNDEF?a.top:d.position().top-(h?0:c.scrollTop()))-a.d,n=d.offset().left,m=d.offset().top,k=(h?c.width():
b(window).width())+2*a.d,p=(h?c.height():b(window).height())+2*a.d,l,r,q,w,x,t=0;e.each(function(){r=b(this);l=r.parent();if(x=r.data("src"))w=l.offset().left-n,q=l.offset().top-m,q<g+p&&(w<j+k&&q+l.outerHeight()>g&&w+l.outerWidth()>j)&&(b("<span>",{"class":a.wait}).appendTo(l),r.hide().on("load",function(){b(this).fadeIn().siblings("."+a.wait).remove()}).attr({src:x}).removeClass(a.loadClass),t++)})}}})};b.fn.loadImages.defaults={selector:".load",loadClass:"toload",wait:"wait",d:80}})(jQuery);
(function(b){b.fn.addScroll=function(a){a=b.extend({},b.fn.addScroll.defaults,a);return this.each(function(){var c,d=b(this),e=d.parent(),h,j,g,n,m,k,p,l,r=0,q,w,x,t,u,f,s;d.css({position:"absolute",width:e.width-20});e.css({overflow:"hidden"});"absolute"!==e.css("position")&&e.css({position:"relative"});h=b("<div>",{"class":a.upbtn}).appendTo(e);j=b("<div>",{"class":a.dnbtn}).appendTo(e);g=b("<div>",{"class":a.scbar}).appendTo(e);n=b("<div>").appendTo(g);m=h.add(j).add(g);m.hide();var z=function(){return d.position().top},
v=function(a){return Math.round((g.height()-6)*-(null==a?z():a)/k)+3},C=function(){return Math.max(Math.round((g.height()-6)*p/k),a.dragMinSize)},y=function(b){null==b&&(b=z());h.css({opacity:b?1:a.disabledOpacity});j.css({opacity:b===p-k?a.disabledOpacity:1})},A=function(){return!1},E=function(){var a=k,b=p;k=d.height();p=e.height();e.scrollTop()&&(d.css({top:-e.scrollTop()}),e.scrollTop(0));if(a!==k||b!==p)k<=p?(d.css({top:0}).off("selectstart",A),m.hide()):(d.position().top<p-k&&d.css({top:p-k}),
n.css({top:v(),height:C()}),d.on("selectstart",A),m.show(),y()),e.loadImages()},D=function(b){clearInterval(l);p>=k||(b=Math.minMax(p-k,Math.round(b),0),n.stop(!0,!1).animate({top:v(b)},a.speed,a.effect),d.stop(!0,!1).animate({top:b},a.speed,a.effect,function(){y(b)}),e.loadImages({top:b}))};h.on("click",function(){D(z()+p);return!1});j.on("click",function(){D(z()-p);return!1});g.on("click",function(a){a.pageY<n.offset().top?D(z()+p):a.pageY>n.offset().top+n.height()&&D(z()-p);return!1});if(a.enableMouseWheel)d.on("mousewheel",
function(b,c){c&&(clearTimeout(l),n.stop(!0,!0),d.stop(!0,!0),D(z()+a.wheelIncr*(0>c?-1:1)));return!1});var G=function(a){a.preventDefault();n.css({top:Math.minMax(2,Math.round(a.pageY-n.data("my")),g.height()-n.height()-2)});d.css({top:Math.minMax(p-k,-Math.round((n.position().top-3)*k/(g.height()-6)),0)});y();e.loadImages();return!1},B=function(a){a.preventDefault();b(document).off("mousemove",G).off("mouseup",B);return!1};n.on("mousedown",function(a){a.preventDefault();b(this).data("my",Math.round(a.pageY)-
b(this).position().top);b(document).on({mousemove:G,mouseup:B});return!1});var H=function(a){return r=a.touches&&0<a.touches.length?a.touches[0].clientY:a.clientY?a.clientY:r},K=function(){f+=Math.round(u/20);var a=t+f;0<a||a<s?(clearInterval(l),e.loadImages()):(d.css({top:a}),n.css({top:v(),height:C()}),u*=0.8,10>Math.abs(u)&&(u=0,clearInterval(l),e.loadImages()))},I=function(a){a.preventDefault();if(w){if(a=H(a)-w)d.data("dragOn",!0),d.css({top:Math.minMax(s,q+a,0)}),n.css({top:v(),height:C()})}else w=
H(a);return!1},J=function(a){a.preventDefault();t=z();a=H(a)-w;var c=(new Date).getTime()-x;u=1E3*a/c;l=setInterval(K,50);document.touchMode?(this.removeEventListener(TOUCH_MOVE,I),this.removeEventListener(TOUCH_END,J)):b(document).off({mousemove:I,mouseup:J});setTimeout(function(){d.data("dragOn",!1)},20);e.loadImages();return 4>Math.abs(a)&&300>c},V=function(c){var e=c.target.nodeName;if("INPUT"===e||"TEXTAREA"===e||"BUTTON"===e||"SELECT"===e)return!0;c.preventDefault();if(d.data("dragOn"))return J(c),
!0;if(c.target.scrollHeight-1>c.target.clientHeight||a.dontDrag&&(b(c.target).is(a.dontDrag).length||b(c.target).parents(a.dontDrag).length)||p>=k||("touchstart"===c.type||"touchmove"===c.type)&&(!c.touches||1<c.touches.length||d.is(":animated")))return!0;n.stop(!0,!0);d.stop(!0,!0);clearInterval(l);q=z();w=H(c);x=(new Date).getTime();f=0;s=p-k;if(document.touchMode)return b(c.target).closest("a").focus(),this.addEventListener(TOUCH_MOVE,I),this.addEventListener(TOUCH_END,J),!0;b(document).on({mousemove:I,
mouseup:J});return!1};if(document.touchMode)d[0].addEventListener(TOUCH_START,V);else d.on("mousedown",V);b(window).on("resize",function(){clearTimeout(c);c=setTimeout(E,50)});c=setTimeout(E,10);a.refresh&&setInterval(function(){b("[role=gallery]").is(":visible")||E()},a.refresh);d.attr("role","scroll").data("dragOn",!1).on("adjust",E);m.on("selectstart",A);V=function(){if(!d.data("dragOn")){var a=b(this).parent()===d?b(this):b(this).parent(),c=a.position().top,a=a.outerHeight(!0),f=d.position().top,
g=e.height();if(!(g>d.height())){if(c+a>g-f)f=Math.max(g-a-c,g-d.height());else if(c<-f)f=-c;else return;D(f)}}};if(a.focusActive)d.find("a").on("setactive",V);d.find("a").on("click",function(a){return d.data("dragOn")?(a.preventDefault(),!1):!0});if(b.isFunction(a.enableKeyboard)||a.enableKeyboard)b(document).on("keydown",function(c){if(document.activeElement&&"INPUT"===document.activeElement.nodeName||b.isFunction(a.enableKeyboard)&&!a.enableKeyboard())return!0;switch(c?c.keyCode:window.event.keyCode){case 33:return c.preventDefault(),
D(z()+p),!1;case 34:return c.preventDefault(),D(z()-p),!1}return!0})})};b.fn.addScroll.defaults={upbtn:"scrup",dnbtn:"scrdn",scbar:"scrbar",dragMinSize:10,speed:300,effect:"swing",disabledOpacity:0.3,wheelIncr:50,enableKeyboard:!0,enableMouseWheel:!0,focusActive:!0,refresh:0}})(jQuery);
(function(b){b.extend(jQuery.easing,{easeOutBack:function(a,b,d,e,h,j){null==j&&(j=1.70158);return e*((b=b/h-1)*b*((j+1)*b+j)+1)+d}});b.fn.scrollThumbs=function(a){a=b.extend({},b.fn.scrollThumbs.defaults,a);return this.each(function(){var c=b(this),d=c.parent(),e=0,h,j,g,n,m,k,p,l,r,q=b("<div>",{"class":a.scleft}).insertAfter(d),w=b("<div>",{"class":a.scright}).insertAfter(d),x=function(b){b=null==b?c.position().left:b;q.css({opacity:0>b?1:a.disabledOpacity});w.css({opacity:d.width()<b+c.width()?
1:a.disabledOpacity})},t=function(e){var f=d.width(),g=c.width();f&&(g&&!(f>=g)&&b.isNumeric(e))&&(0<e?e=0:e<f-g&&(e=f-g),x(e),c.stop(!0,!1),clearInterval(l),c.animate({left:e},a.speed,a.effect),d.loadImages({left:e}))};q.on("click",function(a){a.preventDefault();u();t(c.position().left+d.width());return!1});w.on("click",function(a){a.preventDefault();u();t(c.position().left-d.width());return!1});var u=function(b){"number"===typeof r&&clearTimeout(r);r=typeof b!==UNDEF?b:setTimeout(function(){r=!1},
a.seekStay)};c.on("setactive",function(){if(!c.data("dragOn")&&!r){var b=c.find(a.active).closest("li");if(b.length){var e=b.position().left,b=b.outerWidth(!0),f=Math.round(b*a.headRoom),g=c.position().left,j=d.width();if(!(j>c.width())){if(e>j-b-f-g)g=Math.max(j-b-f-e,j-c.width());else if(e<-g+f)g=-e+f;else return;t(g)}}}});var f=function(a,b){a.preventDefault();b&&(c.stop(!0,!1),clearInterval(l),u(),t(c.position().left+d.width()*(0>b?-1:1)));return!1};if(a.enableMouseWheel)c.on("mousewheel",f);
x();var s=function(a){return e=a.touches&&0<a.touches.length?a.touches[0].clientX:a.clientX?a.clientX:e},z=function(){k+=Math.round(m/20);var a=n+k;0<a||a<p?clearInterval(l):(c.css({left:a}),m*=0.8,10>Math.abs(m)&&(m=0,clearInterval(l)))},v=function(a){a.preventDefault();if(j){if(a=s(a)-j)c.data("dragOn",!0),c.css({left:Math.minMax(p,h+a,0)})}else j=s(a);return!1},C=function(a){a.preventDefault();n=c.position().left;var e=s(a)-j,f=(new Date).getTime()-g;m=1E3*e/f;l=setInterval(z,50);u();document.touchMode?
(c[0].removeEventListener(TOUCH_MOVE,v),c[0].removeEventListener(TOUCH_END,C),10>Math.abs(e)&&b(a.target).parents("a").trigger("click")):b(document).off({mousemove:v,mouseup:C});setTimeout(function(){c.data("dragOn",!1)},20);d.loadImages();return 4>Math.abs(e)&&300>f},f=function(a){a.preventDefault();if(("touchstart"===a.type||"touchmove"===a.type)&&(!a.touches||1<a.touches.length||c.is(":animated")))return!0;c.stop(!0,!1);clearInterval(l);u(!0);h=c.position().left;j=s(a);g=(new Date).getTime();k=
0;p=d.width()-c.width();if(0<=p)return!0;if(document.touchMode)b(a.target).closest("a").focus(),c[0].addEventListener(TOUCH_MOVE,v),c[0].addEventListener(TOUCH_END,C);else b(document).on({mousemove:v,mouseup:C});return!1};if(document.touchMode)c[0].addEventListener(TOUCH_START,f);else c.on("mousedown",f);c.attr("role","scroll").data("dragOn",!1);c.add(q).add(w).on("selectstart",noAction);d.loadImages()})};b.fn.scrollThumbs.defaults={active:".active",scleft:"scleft",scright:"scright",seekStay:3E3,
speed:1500,incr:100,effect:"easeOutBack",headRoom:0.67,disabledOpacity:0.3,enableMouseWheel:!0}})(jQuery);
(function(b){b.extend(jQuery.easing,{easeOutCubic:function(a,b,d,e,h){return e*((b=b/h-1)*b*b+1)+d}});b.fn.addSwipe=function(a,c,d){d=b.extend({},b.fn.addSwipe.defaults,d);return this.each(function(){var e=b(this),h=e.parent(),j=this,g=0,n=0,m=h.outerWidth(),k=h.outerHeight(),p=e.outerWidth(),l=e.outerHeight(),r,q,w,x,t,u,f,s,z=function(){m=h.outerWidth();k=h.outerHeight()};b(window).on("resize.addswipe",function(){clearTimeout(q);q=setTimeout(z,50)});var v=function(a){if(j.dragOn)return!1;a.target.trigger("click",
a)},C=function(a){s?(u=(a.touches&&0<a.touches.length?a.touches[0].clientX:a.clientX)-x,e.translate(g+u,0)):(a.touches&&0<a.touches.length?(u=a.touches[0].clientX-x,f=a.touches[0].clientY-t):null!==a.clientX&&(u=a.clientX-x,f=a.clientY-t),e.translate(g+u,n+f))},y=function(){I();j.removeEventListener(TOUCH_MOVE,E);j.removeEventListener(TOUCH_END,y);return!1},A=function(a){a.preventDefault();I();b(document).off("mousemove.addswipe mouseup.addswipe");return!1},E=function(a){a.preventDefault();C(a);return!1},
D=function(a){a.preventDefault();C(a.originalEvent);return!1},G=function(a){if(a.touches){if(1<a.touches.length)return!0;x=a.touches[0].clientX;t=a.touches[0].clientY}else x=a.clientX,t=a.clientY;K();j.addEventListener(TOUCH_MOVE,E);j.addEventListener(TOUCH_END,y);return!0},B=function(a){x=a.originalEvent.clientX;t=a.originalEvent.clientY},H=function(a){a.preventDefault();B(a);K();e.on("click.addswipe",v);b(document).on({"mousemove.addswipe":D,"mouseup.addswipe":A});return!1},K=function(){e.removeClass("smooth");
j.dragOn=!0;w=(new Date).getTime();m=m||h.outerWidth();p=e.outerWidth();l=e.outerHeight();s=l<=k;g=e.data("tr_x")||0;n=s?0:e.data("tr_y")||0;u=f=0;r=p>m?Math.round((p-m*(1-d.oversizeTreshold))/2):0},I=function(){if(s&&!r&&Math.abs(u)<d.treshold)j.dragOn=null,e.translate(0,0),e.trigger("click");else{var h=(new Date).getTime()-w,l=g+u+300*u/h;e.translate(l,s?0:n+f+300*f/h,"smooth");l<-r?b.isFunction(a)&&a.call(j):l>r&&b.isFunction(c)&&c.call(j)}setTimeout(function(){j.dragOn=null},100);return!1};e.attr("draggable",
"true");if(document.touchMode)j.addEventListener(TOUCH_START,G);else e.on({"dragstart.addswipe":H,"mousedown.addswipe":B});e.on("dragcancel.addswipe",function(){setTimeout(function(){j.dragOn=null},20);e.translate(0,0,"smooth");return!1});e.on("unswipe.addswipe",function(){setTimeout(function(){j.dragOn=null},20);e.removeAttr("draggable");document.touchMode?(j.removeEventListener(TOUCH_MOVE,E),j.removeEventListener(TOUCH_END,y),j.removeEventListener(TOUCH_START,G)):(e.off(".addswipe"),b(document).off(".addswipe"))});
e.on("selectstart.addswipe",noAction)})};b.fn.addSwipe.defaults={treshold:40,oversizeTreshold:0.2,margin:15}})(jQuery);
(function(b){b.fn.alignTo=function(a,c){c=b.extend({},b.fn.alignTo.defaults,c);"string"===typeof a&&(a=b(a));if(a instanceof b&&a.length){var d=a.offset(),e=a.outerWidth(),h=a.outerHeight(),j=b(window).width(),g=b(window).height();return b(this).each(function(){var a=b(this);a.css("maxHeight","none");var m=a.outerWidth(),k=a.outerHeight(),p=Math.round(d.left+c.pos[2]*e/2+(c.pos[2]-1)*c.gap),l=Math.round(d.top+c.pos[3]*h/2+(c.pos[3]-1)*c.gap),p=Math.round(p-c.pos[0]*m/2),l=Math.round(l-c.pos[1]*k/
2);if(0>l||l+k>g)1!==c.pos[2]?l=2*l+k>g?g-k:0:0===c.pos[3]?g>2*d.top+h&&(l=d.top+h+c.gap):2===c.pos[3]&&g<2*d.top+h&&(l=Math.max(0,d.top-k-c.gap)),0>l&&(l=0),l+k>g&&a.css({overflow:"auto",maxHeight:g-l-(parseInt(a.css("paddingTop"),10)+parseInt(a.css("paddingBottom"),10))});if(0>p||p+m>j)1!==c.pos[3]?p=2*p+m>j?j-m:0:0===c.pos[2]?j>2*d.left+e&&(p=d.left+e+c.gap):2===c.pos[2]&&j<2*d.left+e&&(p=Math.max(0,d.left-m-c.gap)),0>p&&(p=0),p+m>j&&a.css({overflow:"auto",maxWidth:j-p-(parseInt(a.css("paddingLeft"),
10)+parseInt(a.css("paddingRight"),10))});a.css({position:"absolute",left:p,top:l})})}};b.fn.alignTo.defaults={gap:5,pos:[1,2,1,0]}})(jQuery);
(function(b){b.fn.addPlayer=function(a){if(typeof b.fn.jPlayer!==UNDEF){a=b.extend({},b.fn.addPlayer.defaults,a);var c=getTranslations(b.fn.addPlayer.text),d=0<=navigator.userAgent.indexOf("Firefox")&&0<=navigator.platform.indexOf("Mac"),e={cont:"jp-cont",mini:"jp-mini",audio:"jp-audio",video:"jp-video",playerType:"jp-type-single",player:"jp-jplayer",title:"jp-title",progress:"jp-progress",controls:"jp-controls-holder",startStop:"jp-startstop",volume:"jp-volume",times:"jp-times",toggles:"jp-toggles",
warning:"jp-warning",videoPlay:"jp-video-play",play:"jp-play",pause:"jp-pause",stop:"jp-stop",seekBar:"jp-seek-bar",playBar:"jp-play-bar",mute:"jp-mute",unmute:"jp-unmute",volumeBar:"jp-volume-bar",volumeBarValue:"jp-volume-bar-value",volumeMax:"jp-volume-max",currentTime:"jp-current-time",duration:"jp-duration",fullScreen:"jp-full-screen",restoreScreen:"jp-restore-screen",repeat:"jp-repeat",repeatOff:"jp-repeat-off",gui:"jp-gui",noSolution:"jp-no-solution",playing:"playing"},h=function(a){var b,
d=function(a){return'<a class="'+e[a]+'" title="'+c[a]+'">'+c[a]+"</a>"};b='<div class="'+e.progress+'"><div class="'+e.seekBar+'"><div class="'+e.playBar+'"></div></div></div>';b+='<div class="'+e.controls+'">';b+='<div class="'+e.startStop+'">'+d("play")+d("pause")+d("stop")+"</div>";b+='<div class="'+e.volume+'">'+d("mute")+d("unmute")+'<div class="'+e.volumeBar+'"><div class="'+e.volumeBarValue+'"></div></div></div>';b+='<div class="'+e.times+'"><div class="'+e.currentTime+'"></div><div class="'+
e.duration+'"></div></div>';b+='<div class="'+e.toggles+'">'+(a?"":d("fullScreen")+d("restoreScreen"))+d("repeat")+d("repeatOff")+"</div>";return b+"</div>"},j=function(){var a;(a=b(this).data("media"))&&a.jPlayer("pause");return!1},g=function(){var a;(a=b(this).data("media"))&&a.jPlayer("destroy");b(window).off("keydown",p);return!1},n=function(){var a;(a=b(this).data("media"))&&a.jPlayer("stop");return!1},m=function(){var a;(a=b(this).data("media"))&&a.jPlayer("play");return!1},k=b(this).eq(0),
p=function(a){return document.activeElement&&("INPUT"===document.activeElement.nodeName||"TEXTAREA"===document.activeElement.nodeName)?!0:32===(a?a.keyCode:window.event.keyCode)?(k.find("."+e.player).jPlayer(k.data(e.playing)?"pause":"play"),!1):!0},l=function(b){return a.hasOwnProperty("audio")?a.audio:0<".mp3.m4a.f4a.rtmpa".indexOf(b.getExt())},r=function(a){var b=l(a)?"a":"v";switch(a.getExt()){case "mp3":a="mp3";break;case "mp4":a="m4"+b;break;case "ogg":a="og"+b;break;case "webm":a="webm"+b;
break;case "flv":case "f4a":case "f4v":a="fl"+b;break;case "rtmp":a="rtmp"+b;break;default:a=null}return a};return this.each(function(){var q=b(this),k,x,t,u=a.folder||"",f,s,z,v,C=0;a.elem?(v=b(this).find(a.elem),s=v.attr("href"),t=v.attr("title"),k=v.find("img:first"),k.length?(z=k.attr("src"),t||(t=k.attr("alt"))):z=t=""):(s=a.src,t=a.title||"",z=a.poster||"",v=b('<a href="'+s+'"'+(t?' title="'+t+'"':"")+">"+(z?'<img src="'+z+'">':"")+"</a>").appendTo(b(this)));if(LOCAL){var y=b('<div class="'+
e.warning+'">'+c.localFlashWarning+"</a></div>").appendTo(v);v.css("position","relative");y.hide();setTimeout(function(){y.fadeIn()},2E3)}if(s){a.auto&&(a.lowPriority||b("."+e.cont).each(function(){if(b(this).data(e.playing))return!0}));0<s.indexOf("::")?(s=s.split("::"),k=l(s[0]),x=r(s[0])):(k=l(s),x=r(s));this.id||(this.id=a.id+b.fn.addPlayer.id++);f="#"+this.id;b(q).addClass(e.cont);a.mini&&b(q).addClass(e.mini);t=a.showTitle?t:"";var A=k;"absolute"!==q.css("position")&&"fixed"!==q.css("position")&&
q.css({position:"relative"});q.css({overflow:"hidden"});var E,D=b('<div class="'+(A?e.audio:e.video)+'"></div>').appendTo(q),D=b('<div class="'+e.playerType+'"></div>').appendTo(D);E=b('<div class="'+e.player+'"></div>').appendTo(D);D.append('<div class="'+e.videoPlay+'"><a>'+c.play+"</a></div>");t&&D.append('<div class="'+e.title+'"><ul><li>'+t+"</li></ul></div>");D.append('<div class="'+e.gui+'">'+h(A)+"</div>");D.find("."+e.gui+" a").attr("href",NOLINK);!document.touchMode&&q.hasClass(e.fullScreen)&&
D.find("."+e.gui).hide();q.append('<div class="'+e.noSolution+'">'+c.unsupportedMediaFormat+"</div>");t=q.css("paddingTop");var A=q.css("paddingLeft"),D=q.css("paddingRight"),G=q.css("paddingBottom");q.find("."+e.gui).css({bottom:G,left:A,right:D});q.find("."+e.title).css({top:t,left:A,right:D});var B=function(){var c={},d,e,f=a.relativeUrl?"":location.href.substring(0,location.href.lastIndexOf("/")+1);b.isArray(s)?(C>=s.length&&(C=0),d=s[C]):(d=s,z&&(c.poster=(f+u+z).fixUrl()));e=r(d);c[e]=(f+u+
d).fixUrl();return c},H=function(){if(b.cookie){var a=q.find("."+e.currentTime).text().split(":"),a=2<a.length?60*(60*parseInt(a[0],10)+parseInt(a[1],10))+parseInt(a[2],10):60*parseInt(a[0],10)+parseInt(a[1],10);b.cookie("jp_"+q[0].id,(q.data(e.playing)?"1":"0")+"::"+a+"::"+E.jPlayer("option","volume").toString().substring(0,5)+(C!==UNDEF?"::"+C:""))}};t=!k&&!d;q.on("setEndedFn",function(c,d){a.ended=d&&b.isFunction(d)?d:null});E.jPlayer({cssSelectorAncestor:f,backgroundColor:a.backgroundColor,supplied:x,
swfPath:a.resPath+"/"+a.swf,solution:a.solution,size:{width:"100%",height:"100%"},fullWindow:!k&&a.fullScreen,preload:"auto",loop:a.loop,volume:a.volume,autohide:{restored:t,full:t},ready:function(){var c=b(this),d;if(a.saveStatus)a:{if(b.cookie&&(d=b.cookie("jp_"+q[0].id))){d=d.split("::");d={playing:"1"===d[0],time:parseInt(d[1]||0,10),volume:parseFloat(d[2]||0.8),curr:parseInt(d[3]||0,10)};break a}d=null}else d=null;q.data("media",c);a.saveStatus&&(b(window).on("unload",H),d&&(C=d.curr));var e=
B();v&&v.hide();c.jPlayer("setMedia",e);q.on({play:m,pause:j,stop:n,destroy:g});a.saveStatus&&d?(c.jPlayer("volume",d.volume),c.jPlayer(d.playing?"play":"pause",d.time)):a.auto&&!document.touchMode&&c.jPlayer("play");if(!a.lowPriority)b(window).on("keydown",p)},play:function(){b(this).jPlayer("pauseOthers");q.data(e.playing,!0);document.touchMode&&settimeout(function(){q.find("."+e.title).fadeOut(1E3)},600)},pause:function(){q.data(e.playing,!1)},stop:function(){q.data(e.playing,!1);document.touchMode&&
q.find("."+e.title).fadeIn(300)},ended:function(){b.isArray(s)&&(C+1<s.length||a.loop)?(C=(C+1)%s.length,b(this).jPlayer("setMedia",B()),a.auto&&b(this).jPlayer("play")):(q.data(e.playing,!1),b.isFunction(a.ended)&&a.ended.call())}})}})}};b.fn.addPlayer.id=0;b.fn.addPlayer.defaults={id:"jp_container_",backgroundColor:"#000000",resPath:"",swf:"Jplayer.swf",relativeUrl:!1,solution:"html,flash",volume:0.8,auto:!1,loop:!1,keyboard:!0,lowPriority:!1,saveStatus:!1,mini:!1,fullScreen:!1,showTitle:!1,size:{width:"100%",
height:"100%"}};b.fn.addPlayer.text={play:"play",pause:"pause",stop:"stop",mute:"mute",unmute:"unmute",fullScreen:"full screen",restoreScreen:"restore screen",repeat:"repeat",repeatOff:"repeat off",localFlashWarning:"Local Flash playback is possibly blocked by Flash security rules. Test videos in the uploaded album!",unsupportedMediaFormat:'<span>Unsupported media format</span>You might need to either update your browser or the <a href="http://get.adobe.com/flashplayer/" target="_blank">Flash plugin</a> or use another browser to play this media.'}})(jQuery);
(function(b){b.getLatLng=function(a){return typeof google===UNDEF||null==a?null:"string"===typeof a?(a=a.split(","),new google.maps.LatLng(parseFloat(a[0])||0,parseFloat(a[a.length-1])||0)):new google.maps.LatLng(a[0],a[1])};b.fn.addMap=function(a){if(typeof google===UNDEF||!google.maps)return this;a=b.extend({},b.fn.addMap.defaults,a);var c=a.resPath+"/marker-curr.png",d=a.resPath+"/marker.png",e=new google.maps.MarkerImage(c,new google.maps.Size(17,24),new google.maps.Point(0,0),new google.maps.Point(8,
24)),h=new google.maps.MarkerImage(d,new google.maps.Size(17,24),new google.maps.Point(0,0),new google.maps.Point(8,24)),j=new google.maps.MarkerImage(a.resPath+"/marker-shadow.png",new google.maps.Size(24,24),new google.maps.Point(0,0),new google.maps.Point(8,24));return this.each(function(){var g=b(this),n,m,k,p,l,r,q=[],w;g.readData(a,"type,zoom,map,label,resPath,markers");var x=function(){g&&g.data("fresh")&&(k&&g.is(":visible")&&!g.parents(":hidden").length&&g.width()&&g.height()?(clearTimeout(l),
g.width(g.parent().width()),google.maps.event.trigger(k,"resize"),k.setCenter(n),g.data("fresh",!1)):l=setTimeout(x,200))};p&&p.length&&p.remove();p=b("<div>").css({position:"absolute",top:"-9000px",width:g.width(),height:g.height()}).appendTo("body");g.data("fresh",!0).on({adjust:x,destroy:function(){k.getParentNode().removeChild(k);b(window).off("resize",x)}});if(a.markers&&a.markers.length&&null!=a.curr)n=a.markers[a.curr].map;else if(a.map)n=b.getLatLng(a.map),m=a.label;else return;if(null!==
(r=b.cookie("mapType")))a.type=r;if(null!==(r=b.cookie("mapZoom")))a.zoom=parseInt(r,10)||a.zoom;setTimeout(function(){var l,r=new google.maps.Map(p[0],{zoom:a.zoom,center:n,scrollwheel:!1,mapTypeId:a.type.toLowerCase()});google.maps.event.addListener(r,"maptypeid_changed",function(){b.cookie("mapType",b.fn.addMap.defaults.type=r.getMapTypeId(),3600)});google.maps.event.addListener(r,"zoom_changed",function(){b.cookie("mapZoom",b.fn.addMap.defaults.zoom=r.getZoom(),3600)});if(a.markers&&1<a.markers.length){var f,
s,x=Math.max(a.curr-a.range,0),v=Math.min(a.curr+a.range,a.markers.length),C=function(){a.click.call(this)};for(f=x;f<v;f++)s=a.markers[f],l={position:s.map,map:r,title:s.label,icon:f===a.curr?e:h,shadow:j,zIndex:f===a.curr?999:f},l=new google.maps.Marker(l),b.isFunction(a.click)&&s.link&&(l.link=s.link,google.maps.event.addListener(l,"click",C)),q.push(l)}else l=new google.maps.Marker(b.extend({position:n,map:r,title:m},c));p.css({top:0}).appendTo(g);k=r;w=a.curr;g.on("setactive",function(a,e){b.isArray(q)&&
q.length&&(w>=x&&(q[w].setIcon(d),q[w].setZIndex(w)),typeof e!==UNDEF&&e>=x&&e<x+q.length?(q[e-x].setIcon(c),q[e-x].setZIndex(9999),k.setCenter(q[e-x].position),w=e):w=-1)})},20);b(window).on("resize",function(){clearTimeout(l);g.data("fresh",!0);l=setTimeout(x,100)})})};b.fn.addMap.defaults={type:"roadmap",zoom:16,range:30,resPath:""}})(jQuery);
(function(b){var a=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement};b.fn.fullScreen=function(b){if(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled){if(typeof b===UNDEF)return a();b?(b=this[0],a()||(b.requestFullscreen?b.requestFullscreen():b.webkitRequestFullscreen?b.webkitRequestFullscreen():b.mozRequestFullScreen?b.mozRequestFullScreen():
b.msRequestFullscreen&&b.msRequestFullscreen())):a()&&(document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen())}else return!1}})(jQuery);
var xDecrypt=function(b){if("String"===!typeof this)return"";var a=[147,163,87,254,153,4,198,23],c=b.length,d=5*Math.ceil(c/8),e=Array(d),h="",j,g=0,n,m;for(j=0;j<d;j++)e[j]=0;for(j=0;j<c;j++){if(9<(m=b.charCodeAt(j)-48))m-=7;m<<=11-g%8;n=Math.floor(g/8);n<d&&(e[n]|=m>>8,++n<d&&(e[n]|=m&255));g+=5}for(j=0;j<d;j++)e[j]^=a[j%8];d=e[0]|e[1]<<8;m=0;for(j=4;j<d;j++)h+=String.fromCharCode(e[j]),m+=e[j];m!=(e[2]&255|e[3]<<8)&&(h="");return h};
(function(b){b.fn.addShop=function(a,c){c=b.extend({},b.fn.addShop.defaults,c);if(!a||!a.length||!c.id)return this;var d=b.fn.addShop.id,e=b.fn.addShop.text,h=c.id.replace("|","@"),j=DEBUG?b.fn.addShop.st.sandboxurl:b.fn.addShop.st.url,g=b.fn.addShop.st.curr_symbol[c.currency]||c.currency,n=b(this).eq(0),m,k,p=a.length,l,r,q=1<p?b.fn.addShop.st.targetCart:b.fn.addShop.st.target,w,x=function(a,c,d,e,f){if(!a||!c)return{};a=b("<input>",{type:e||"text"}).appendTo(a);a.prop("name",c);d&&a.val("string"===
typeof d?d.stripQuote():d);f&&a.prop(f,!0);return a},t=function(a){if(typeof a===UNDEF)return s(1<p?d.discountRateCart:d.discountRate);1<p?s(d.discountRateCart,a):(s(d.discountRate,a),s(d.discountRate+"2",a))},u=function(a){if(typeof a===UNDEF)return s(1<p?d.discountAmountCart:d.discountAmount);s(1<p?d.discountAmountCart:d.discountAmount,a)},f=function(a,b){var c=k.children("[name="+d.option+"]");if(c&&c.length){var e=c.val().replace(/(\s\(CC\:.+\))$/,"");c.val(e+" (CC:"+a+(typeof b!==UNDEF?"="+b:
"")+")")}},s=function(a,b){var c=k.children("[name="+a+"]");if(typeof b===UNDEF)return c&&c.length?parseFloat(c.val()):null;null==b?c.remove():c&&c.length?c.val(b):x(k,a,b,"hidden")},z=function(){var a=m.children("select").eq(0);return a&&a.length?a.prop("selectedIndex"):0},v=function(){var a=z(),c=m.children(".discount").eq(0),d=m.children(".total").eq(0),e=m.children("[name=copies]").val()||1,f=w[a].price,a=w[a].shipping+(e-1)*w[a].shipping2,l=u(),j=t();c.length||(c=b("<span>",{"class":"discount"}).insertAfter(m.children("select")));
l&&0<l?(c.show().html("- "+g+" "+l.toFixed(2)),d.html(g+" <b>"+(p*(e*f+a)-l).toFixed(2)+"</b>")):j&&0<j?(c.show().text("-"+j+"%"),d.html(g+" <b>"+(p*(e*f*(100-j)/100+a)).toFixed(2)+"</b>")):(c.hide(),d.html(g+" <b>"+(p*(e*f+a)).toFixed(2)+"</b>"))},C=function(){var a=z(),b=m.children("[name=copies]").val()||1,e=w[a].price,f=w[a].shipping,g=w[a].shipping2;c.quantityCap&&b>c.quantityCap&&m.children("[name=copies]").val(b=c.quantityCap);if(1<p)for(var l=1;l<=p;l++)s(d.price+"_"+l,e),s(d.copies+"_"+l,
b),s(d.shipping+"_"+l,f?f:null),s(d.shipping2+"_"+l,g?g:null);else s(d.price,e),s(d.copies,b),s(d.shipping,f?f:null),s(d.shipping2,g?g:null);s(d.option,w[a].text);v()},y=function(a){var d,j=new Date,h;a=!0===a;if(c.coupons&&(d=m.children("[name=coupon]"))&&(h=d.val().trim()).length){var k,q,n=xDecrypt(c.coupons).split("::");for(k=0;k<n.length;k++)if(q=n[k].split(/=|\s*<\s*/),q[0]===h&&1<q.length&&(d=parseFloat(q[1]),!(0.01>d))){if(2<q.length){var r=q[2].split(/-|:|\//);2>r.length&&(r[1]=1);3>r.length&&
(r[2]=1);if(new Date(parseInt(r[0]),parseInt(r[1]),parseInt(r[2]))<j)return b("body").addModal(b("<div>",{html:e.expired.replace("{0}",h)}),{type:"error"}),!1}if("%"===q[1].charAt(q[1].length-1)){if(99<d||1>d)continue;k=t();k>d?a&&b("body").addModal(b("<div>",{html:e.lowerThanCurrent.replace("{0}",k+"%")}),{type:"warning"}):(a&&b("body").addModal(b("<div>",{html:e.accepted.replace("{0}",d+"%")}),{title:e.success}),t(d),f(h,d+"%"),b.cookie("discountRate",h,86400))}else b.cookie("discount_"+h)?(a&&
b("body").addModal(b("<div>",{html:e.reclaimed}),{type:"warning"}),u(null),l&&(t(l),f(h,l+"%"))):(k=t(),j=w[z()].price,k=u()||(0<k?p*j*k/100:0),j*p<d?a&&b("body").addModal(b("<div>",{html:e.higherThanPrice.replace("{0}",g+"&nbsp;"+d)}),{type:"warning"}):k>d?a&&b("body").addModal(b("<div>",{html:e.lowerThanCurrent.replace("{0}",g+"&nbsp;"+k.toFixed(2))}),{type:"warning"}):(a?b("body").addModal(b("<div>",{html:e.accepted.replace("{0}",g+"&nbsp;"+d)}),{title:e.success}):(b.cookie("discount_"+h,d,86400),
l=t(),t(null)),u(d),f(h,c.currency+" "+d)));v();return!0}b("body").addModal(b("<div>",{html:e.noSuch}),{type:"error"});return!1}return!0},A=c.options.split("::"),E,D,G,B,H=[];for(E=0;E<A.length;E++)if(D=A[E].split("="),1<D.length&&(B={},B.label=D[0],G=D[1].split("+"),null!=(B.price=parseFloat(G[0]))))B.shipping=1<G.length?parseFloat(G[1]):0,B.shipping2=2<G.length?parseFloat(G[2]):B.shipping,B.text=D[0]+" = "+g+" "+B.price.toFixed(2)+(1<G.length?"+"+B.shipping.toFixed(2):""),H.push(B);w=H;if(w.length){m=
b("<form>",{name:"shopping",method:"post"}).appendTo(n);1<p&&m.append(b("<span>",{"class":"count",html:"<b>"+p+"</b> &times;"}));A=w;D=b("<select>").appendTo(m);for(E=0;E<A.length;E++)D.append(b("<option>",{val:A[E].price,html:A[E].text}));r=D;r.on("change",C);c.hasOwnProperty("discount")||(c.discount=b.fn.addShop.defaults.discount||0);"-"===c.discount&&(c.discount=0);1!==c.quantityCap&&(m.append("&times;"),r=x(m,"copies",1),r.addClass("copies").on("change",C));m.append("=");m.append(b("<span>",{"class":"total"}));
c.coupons&&(m.append(b("<input>",{type:"text",name:"coupon","class":"coupon",placeholder:e.couponCode})),A=b("<a>",{href:NOLINK,html:"&nbsp;","class":"redeem"}).on("click",function(a){a.preventDefault();y(!0);return!1}),document.touchMode||A.addTooltip(e.redeem),m.append(A));k=b("<form>",{name:d.form,target:c.continueUrl?"_blank":q,action:j+"cgi-bin/webscr/",method:"post"}).appendTo(n);s("cmd","_cart");s("charset","utf-8");s("lc",c.locale);s(d.seller,h);s(d.currency,c.currency);s(d.shopUrl,c.continueUrl||
decodeURIComponent(window.location.href));null!=c.handling&&b.isNumeric(c.handling)&&s(d.handlingCart,c.handling);s(d.option,w[0].label);c.discount&&100>c.discount&&t(c.discount);if(1<p){s("upload",1);s(d.name,p+" "+e.items);var K;a.each(function(a){r=b(this).find("img:first");K=r.data("src")||r.attr("src")||"";s(d.name+"_"+(a+1),decodeURIComponent(K.getFile()+" ["+c.path+K.getDir().replace("thumbs/","")+"]"))})}else s("add",1),r=a.eq(0).find("img:first"),s(d.name,decodeURIComponent((r.data("src")||
r.attr("src")||"").getFile()+" ["+c.path+"]"));C();k.append(b("<button>",{id:"shopAdd",name:"submit","class":"paypalbtn",html:1<p?e.buyNow:e.addCart}));k.on("submit",function(a){var d=!0;a=b(a.target);c.coupons&&(d=y());d&&(a.parents("[role=modal]").trigger("destroy"),window.open("",q,"width=1024,height=600,scrollbars=yes,resizable=yes,menubar=no,toolbar=no,directories=no,status=no,copyhistory=no"));return d});if(c.coupons&&(C=b.cookie("discountRate")))b("input[name=coupon]").val(C),y(!1);1===p&&
(j=b("<form>",{"class":"view",name:"paypalview",target:q,action:j+"cgi-bin/webscr/",method:"post"}).appendTo(n),x(j,"cmd","_cart","hidden"),x(j,"lc",c.locale,"hidden"),x(j,d.seller,h,"hidden"),x(j,"display",1,"hidden"),j.append(b("<button>",{id:"shopView","class":"paypalbtn",name:"submit",html:e.viewCart})),j.on("submit",function(){window.open("",q,"width=1024,height=600,scrollbars=yes,resizable=yes,menubar=no,toolbar=no,directories=no,status=no,copyhistory=no");return!0}));v();return this}};b.fn.addShop.defaults=
{currency:"EUR",locale:"US",quantityCap:0,shippingFlat:!1};b.fn.addShop.text=getTranslations({addCart:"Add to Cart",viewCart:"View Cart",buyNow:"Buy Now",items:"items",success:"Success",couponCode:"Coupon code",redeem:"Redeem",noSuch:"No such coupon exists!",expired:"The coupon code <b>{0}</b> has expired!",accepted:"The coupon code is accepted. You will get <b>{0}</b> discount the next time you add this item to the cart.",lowerThanCurrent:"This coupon offers lower discount than the current <b>{0}</b>.",
higherThanPrice:"You can use this coupon only for items priced higher than <b>{0}</b>.",reclaimed:"This coupon has already been used!"});b.fn.addShop.st={target:"ShoppingCart",targetCart:"BuyNow",url:"https://www.paypal.com/",sandboxurl:"https://www.sandbox.paypal.com/",btn_lng:{DE:"de_DE",FR:"fr_FR",IT:"it_IT",ES:"es_ES",PT:"pt_PT",PT:"pt_BR",DA:"da_DK",NL:"nl_NL",NO:"no_NO",SV:"sv_SE",TR:"tr_TR",RU:"ru_RU",PL:"pl_PL",IL:"he_IL",TH:"th_TH"},curr_symbol:{USD:"US$",EUR:"&euro;",GBP:"GB&pound;",JPY:"&yen;",
HUF:"Ft"}};b.fn.addShop.id={form:"paypal",seller:"business",currency:"currency_code",name:"item_name",option:"item_number",custom:"custom",price:"amount",priceCart:"amount_1",copies:"quantity",discountRate:"discount_rate",discountRateCart:"discount_rate_cart",discountAmount:"discount_amount",discountAmountCart:"discount_amount_cart",shipping:"shipping",shipping2:"shipping2",handlingCart:"handling_cart",shopUrl:"shopping_url"}})(jQuery);
(function(b){b.fn.addSocial=function(a){a=b.extend({},b.fn.addSocial.defaults,a);var c=getTranslations(b.fn.addSocial.text),d=window.location.href.split("#")[0]+(a.useHash?"#"+encodeURIComponent(a.hash||""):""),e=encodeURIComponent(window.location.href.split("#")[0]+(a.useHash?"#"+encodeURIComponent(a.hash||""):"")),h=encodeURIComponent(a.title||b("meta[name=title]").attr("content")||b("title").text()),j=encodeURIComponent(c.checkOutThis),g=a.inline?90:a.width,n=a.image?window.location.href.getDir()+
a.image:b("link[rel=image_src]").attr("href");return this.each(function(){var m=b(this);"a"===this.nodeName&&m.attr("href",NOLINK);var k=b("<div>",{"class":a.className});if(LOCAL&&!DEBUG)k.html(c.localWarning);else{if(!LOCAL){if(!a.useHash){a.facebookLike&&k.append('<div class="likebtn"><iframe src="//www.facebook.com/plugins/like.php?href='+d+"&amp;layout=button_count&amp;show_faces=false&amp;width="+g+"&amp;action=like&amp;font=arial&amp;colorscheme="+a.likeBtnTheme+'&amp;height=22" scrolling="no" frameborder="0" style="border:none;overflow:hidden;width:'+
g+'px;height:22px;" allowTransparency="true"></iframe></div>');a.twitterTweet&&k.append('<div class="likebtn"><iframe allowtransparency="true" frameborder="0" scrolling="no" src="//platform.twitter.com/widgets/tweet_button.html?url='+d+"&text="+h+'" style="width:'+g+'px; height:22px;"></iframe></div>');if(a.googlePlus){var p=a.inline?90:120,l=b('<div class="likebtn" style="max-width:'+p+"px;min-width:"+p+'px;"><div class="g-plusone" data-href="'+d+'"></div></div>').appendTo(k),r=20,q=function(){typeof gapi===
UNDEF?r--?setTimeout(q,200):typeof console!==UNDEF&&console.log("Google Plus API failed to load!"):setTimeout(function(){gapi.plusone.render(l[0],{size:"medium",annotation:"bubble"})},200)};q()}a.pinItBtn&&k.append('<div class="likebtn" style="height:22px;"><a data-pin-config="beside" href="//pinterest.com/pin/create/button/?url='+e+"&media="+encodeURIComponent(n)+"&description="+h+'" data-pin-do="buttonPin" ><img src="http://assets.pinterest.com/images/pidgets/pin_it_button.png" /></a></div>')}a.tumblrBtn&&
k.append('<div class="likebtn" id="tumblr"><a href="//www.tumblr.com/share/'+(a.image?"photo?source=":"link?url=")+encodeURIComponent(d)+"&name="+h+'" title="Share on Tumblr" style="display:inline-block;text-indent:-9999px;overflow:hidden;width:'+g+'px;height:22px;background:url(http://platform.tumblr.com/v1/share_1.png) top left no-repeat transparent;">Tumblr</a></div>')}if(a.facebook||a.twitter||a.gplus||a.pinterest||a.digg||a.delicious||a.myspace||a.stumbleupon||a.reddit||a.email)a.buttonLabels||
k.append("<span>"+c.shareOn+"</span>"),a.facebook&&k.append('<a href="http://www.facebook.com/sharer.php?s=100&p%5Burl%5D='+e+"&p%5Bimages%5D%5B0%5D="+encodeURIComponent(n)+"&p%5Btitle%5D="+h+'" class="facebook"'+(a.buttonLabels?">Facebook":' title="Facebook">')+"</a>"),a.twitter&&k.append('<a href="http://twitter.com/home?status='+j+": "+e+'" class="twitter"'+(a.buttonLabels?">Twitter":' title="Twitter">')+"</a>"),a.gplus&&k.append(b("<a>",{"class":"gplus",href:"https://plus.google.com/share?url="+
e,title:"Google+",text:a.buttonLabels?"Google+":""}).on("click",function(){window.open(this.href,this.title,"menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=760,width=980");return!1})),a.pinterest&&k.append('<a href="http://pinterest.com/pin/create/button/?url='+e+"&media="+encodeURIComponent(n)+"&description="+h+'" class="pinterest"'+(a.buttonLabels?">Pinterest":' title="Pinterest">')+"</a>"),a.digg&&k.append('<a href="http://digg.com/submit?url='+d+'" class="digg"'+(a.buttonLabels?">Digg":
' title="Digg">')+"</a>"),a.delicious&&k.append('<a href="http://delicious.com/save?url='+d+"&title="+h+'&v=5" class="delicious"'+(a.buttonLabels?">Delicious":' title="Delicious"')+"</a>"),a.myspace&&k.append('<a href="http://www.myspace.com/index.cfm?fuseaction=postto&t='+h+"&u="+d+'&l=3" class="myspace"'+(a.buttonLabels?">MySpace":' title="MySpace"')+"</a>"),a.stumbleupon&&k.append('<a href="http://www.stumbleupon.com/submit?url='+d+"&title="+h+'" class="stumbleupon"'+(a.buttonLabels?">StumbleUpon":
' title="StumbleUpon">')+"</a>"),a.reddit&&k.append('<a href="http://www.reddit.com/submit?url='+d+'" class="reddit"'+(a.buttonLabels?">Reddit":' title="Reddit"')+"</a>"),k.children("a").attr("target","_blank"),a.email&&k.append('<a href="mailto:?subject='+j+"&body="+h+"%0D%0A"+d.replace(/%/g,"%25")+'" class="email"'+(a.buttonLabels?">Email":' title="Email">')+"</a>"),!a.buttonLabels&&!document.touchMode&&k.children("a").addTooltip()}m.on("destroy",function(){k.remove()});a.inline?k.appendTo(m):m.addTooltip(k,
{width:a.width,stay:5E3,pos:a.pos})})};b.fn.addSocial.defaults={className:"shares",width:120,useHash:!0,likeBtnTheme:"light",inline:!1,buttonLabels:!0,pos:[1,2,1,0]};b.fn.addSocial.text={shareOn:"Share on",checkOutThis:"Found this page",localWarning:"Can't share local albums. Please upload your album first!"}})(jQuery);
(function(b){b.fn.readData=function(a,c){if(null==a||null==c)return this;c=c.split(",");var d,e=c.length,h;return this.each(function(){for(d=0;d<e;d++)if(null!=(h=b(this).data(c[d])))a[c[d]]=h})};b.fn.showin=function(){return this.each(function(){b(this).css("display","inline-block")})};b.fn.togglein=function(a){if(typeof a===UNDEF)return this.each(function(){b(this).css("display","none"===b(this).css("display")?"inline-block":"none")});b(this).css("display",a?"inline-block":"none");return this};
b.fn.getDim=function(){var a=b(this).eq(0),c={width:a.width(),height:a.height()};if((0===c.width||0===c.height)&&"none"===a.css("display")){var d=a.css("position"),e=a.css("left");a.css({position:"absolute",left:"-10000px",display:"block"});c.width=a.width();c.height=a.height();a.css({display:"none",position:d,left:e})}return c};typeof Search!==UNDEF&&(Search.text=getTranslations({searchBoxTip:"Search...",searchResultsFor:"Search results for",newImages:"New images",notFound:"Not found",close:"Close"}),
Search.start=function(a){if(null!=a){var c="string"===typeof a||b.isNumeric(a)?String(a):"FORM"===a.nodeName?b(a).find("input[type=search]").val().trim():b(a).text().trim(),d,e=0,h,j,g,n=!1,m,k,p,l,r,q,w,x,t,u,f,s,z;if(Search.data&&b.isArray(Search.data)&&Search.data.length&&c&&!(2>c.length)){d=b("<div>",{"class":"searchresults"});k=function(a){a.preventDefault();a=b(this).closest("form").children("input:first").val().trim();2<=a.length&&Search.start(a);return!1};c.startsWith("@new")?(n=!0,g=Search.created||
Math.round((new Date).getTime()/864E5),j=parseInt(c.split(":")[1],10)||30):(z=RegExp("("+c.replace(/\s/g,"|")+")","i"),d.append('<form><input type="text" value="'+c+'"><a class="button">&nbsp;</a></form>'),d.find("a.button").on("click",k),d.find("form").on("submit",k));t=Search.rootPath&&"."!==Search.rootPath?Search.rootPath+"/":"";k=window.location.href.getRelpath(Math.floor(t.length/3));var v=function(a){var d=b(a.target).closest("a");if(!d.length||!d.hasClass("active")||!window.location.href.endsWith(d.attr("href")))return Search.makeSlides||
(d.addClass("active"),d.siblings(".active").removeClass("active")),b.cookie("lastSearch",c,8),!0;a.cancelBubble=!0;return!1};for(p=0;p<Search.data.length;p++){x=t;Search.data[p][0].length&&(x+=(Search.urlEncode?Search.data[p][0]:encodeURIComponent(Search.data[p][0]).replace(/%2F/g,"/"))+"/");q=Search.data[p][1].length;for(l=0;l<q;l++)if(u=Search.data[p][1][l].split(Search.sep),n&&5<u.length&&(m=g-parseInt(u[5],10))<j||!n&&z.test(Search.data[p][1][l])){w=u[0].split(":");s=w[0].getExt();f=1<w.length?
w[1]:w[0].substring(w[0].lastIndexOf(".")+1);r=encodeURIComponent(w[0]);switch(s.toLowerCase()){case Search.ext:w=x+Search.folderThumb;break;case "tif":case "bmp":Search.makeSlides||(r=r.replaceExt(f));case "jpg":case "jpeg":case "png":case "mp4":w=x+Search.thumbs+"/"+r.replaceExt(f);break;case "mp3":w="png"===f?t+"res/audio.png":x+Search.thumbs+"/"+r.replaceExt(f);break;case "gif":r=r.replaceExt(f);w=x+Search.thumbs+"/"+r;break;case "pdf":case "zip":case "txt":case "doc":case "xls":w=t+"res/"+s+
".png";break;default:w=t+"res/unknown.png"}s===Search.ext?(r=x+r,w=x+Search.folderThumb):r=x+(Search.makeSlides?Search.slides+"/"+r.replaceExt(Search.ext):Search.indexName+"#"+(Search.urlEncode?r.replace(/\'/g,"%27").replace(/%/g,"%25").replace(/\(/g,"%2528").replace(/\)/g,"%2529"):r));w=b("<a>",{href:r.fixUrl()}).append(b("<aside>").append(b("<img>",{src:w}))).on("click",v).appendTo(d);r.endsWith(k)&&w.addClass("active");u[1]&&w.append(b("<h5>").append(n?u[1]:u[1].replace(z,"<em>$1</em>")));u[2]&&
u[2]!==u[1]&&w.append(b("<p>").append(n?u[2].trunc(192):u[2].trunc(192).replace(z,"<em>$1</em>")));for(r=3;r<u.length-1;r++)u[r]&&u[r].trim().length&&w.append(b("<p>").append(n?u[r].trunc(192):u[r].trunc(192).replace(z,"<em>$1</em>")));n&&w.append(b("<p>").append("<em>"+getRelativeDate(m)+"</em>"));window.location.hash===u[0]&&(h=e);e++}}a.jquery&&b(a).parents(".hint:first").fadeOut(100,function(){b(this).remove()});e?setTimeout(function(){b(".searchresults > a").eq(h||0).focus()},250):d.append(b("<p>",
{text:Search.text.notFound}));b("body").addModal(d,{uid:"searchres",title:c.startsWith("@new")?Search.text.newImages:Search.text.searchBoxTip,darkenBackground:!1,movable:!0,blocking:!1,closeOnClickOut:!1,defaultButton:"close",resizable:!0,width:240,pos:[2,0],scrollIntoView:!0,savePosition:!0});return!1}}},Search.rootPath="",Search.init=function(a){Search.rootPath=a;if((a=b.cookie("lastSearch"))&&a.length&&"null"!==a)b.cookie("lastSearch",null),Search.start(a)});b.fn.addRegions=function(a,c,d){if(a&&
a.length&&c){d=b.extend({},b.fn.addRegions.defaults,d);var e=[],h,j,g,n,m,k=c.split("::");for(c=0;c<k.length;c++)h=k[c].split(";"),4<h.length&&(h[0].length&&null!==(j=parseFloat(h[1]))&&null!==(g=parseFloat(h[2]))&&null!==(n=parseFloat(h[3]))&&null!==(m=parseFloat(h[4])))&&e.push([h[0],100*j+"%",100*g+"%",100*n+"%",100*m+"%"]);return!e.length?this:this.each(function(){var c=b(this),g,j;g=parseInt(c.css("padding-top"),10);"a"===this.nodeName&&c.attr("href",NOLINK);for(var h=b("<div>",{"class":d.id}).hide(),
k=b("<div>",{"class":d.id+"-cont"}).css({left:g,top:g,right:g,bottom:g}),m=function(a){a.preventDefault();Search.start(a.target);return!1},n=function(a){k.children("a").eq(b(a.target).index()).addClass(d.active)},u=function(a){k.children("a").eq(b(a.target).index()).removeClass(d.active)},f=0;f<e.length;f++)if(g=b('<a href="'+NOLINK+'">'+e[f][0]+"</a>").appendTo(h),j=b("<a>").css({left:e[f][1],top:e[f][2],width:e[f][3],height:e[f][4]}).append(b("<span>",{text:e[f][0]})).appendTo(k),g.on({mouseover:n,
mouseout:u}),typeof Search!==UNDEF)j.on("click",m);c.addTooltip(h,{stay:5E3});c.on("destroy",function(){h.remove()});c.hasClass(d.active)&&k.addClass(d.active);c.on("click",function(){b(this).add(k).toggleClass(d.active)});a.append(k)})}};b.fn.addRegions.defaults={id:"regions",active:"active",pos:[1,2,1,0]};b.fn.centerThis=function(a){a=b.extend({},b.fn.centerThis.defaults,a);return this.each(function(){var c=b(this),d=c.find(a.selector);if(d.length){var e,h,j,g,n,m,k=a.marginLeft+a.padding;e=a.marginRight+
a.padding;var p=a.marginTop+a.padding;n=a.marginBottom+a.padding;m=d.data("ow");j=d.data("oh");if(!m||!j)d.data("ow",m=d.width()),d.data("oh",j=d.height());if(!(h=d.data("bw")))d.data("bw",h=parseInt(d.css("border-top-width"),10)||0);if(!(g=d.data("pw")))d.data("pw",g=parseInt(d.css("padding-top"),10)||0);e=(c.innerWidth()||b("body").width())-2*(h+g)-k-e;c=(c.innerHeight()||b("body").height())-2*(h+g)-p-n;a.fit&&(m>e||j>c||a.enlarge)?(g=Math.min(e/m,c/j),h=Math.round(m*g),j=Math.round(j*g)):h=m;g=
Math.round((e-h)/2)+k;n=Math.round((c-j)/2)+p;h!==m&&d.translateToPos();if(a.animate){d.stop(!0,!1);if(a.preScale&&1!==a.preScale){m=h*a.preScale;var l=j*a.preScale;d.css({left:Math.round((e-m)/2)+k,top:Math.round((c-l)/2)+p,width:Math.round(m),height:Math.round(l)})}else a.init&&d.css({left:g,top:n});d.animate({left:g,top:n,width:h,height:j},{duration:a.speed,easing:a.effect,complete:a.complete})}else d.css({left:g,top:n,width:h,height:j}),b.isFunction(a.complete)&&a.complete.call(this)}})};b.fn.centerThis.defaults=
{selector:".main",speed:500,fit:!0,enlarge:!0,marginTop:0,marginBottom:0,marginLeft:0,marginRight:0,padding:0,init:!1,animate:!1,effect:"swing",complete:null};b.fn.collectMarkers=function(a){a=b.extend({},b.fn.collectMarkers.defaults,a);var c=[],d,e,h;this.each(function(j){d=b(this).find(a.selector);if(d.length&&(e=d.data(a.mapid))&&(e=b.getLatLng(e)))h=d.data(a.captionid)||d.attr("alt"),c.push({map:e,label:j+1+(h?": "+h.stripHTML():""),link:a.dynamic?b(this):b(this).attr("href")})});return c};b.fn.collectMarkers.defaults=
{selector:"img:first",mapid:"map",captionid:"caption"};b.fn.markFoldersNew=function(a){a=b.extend({},b.fn.markFoldersNew.defaults,a);text=getTranslations(b.fn.markFoldersNew.text);if(a.days){var c=a.ref||Math.round((new Date).getTime()/864E5);return this.each(function(){c-parseInt(b(this).data("modified")||0,10)<=a.days&&b(this).after('<span class="'+a.cls+'">'+text.newItem+"</span>")})}};b.fn.markFoldersNew.defaults={days:7,cls:"newlabel"};b.fn.markFoldersNew.text={newItem:"NEW"};b.fn.turtleHelp=
function(a){a=b.extend({},b.fn.turtleHelp.defaults,a);var c=getTranslations(b.fn.turtleHelp.text),d=b("<div>",{"class":"help"}),e=function(a){if(c.hasOwnProperty(a)){var e=1,h,m=b("<ul>",{"class":a}).appendTo(d);for(h in c[a])m.append(b("<li><span>"+e++ +"</span>"+c[a][h]+"</li>"))}};a.index&&e("index");a.slide&&e("slide");a.pressF1&&d.append(b("<p>",{html:c.help_pressF1}));var h=function(){b("body").addModal(d,{uid:"help",title:c.help_title,width:720,savePosition:!0,resizable:!0})};if(a.useF1&&!document.touchMode)b(document).on("keydown",
function(c){return document.activeElement&&"INPUT"===document.activeElement.nodeName||b.isFunction(a.enableKeyboard)&&!a.enableKeyboard()||b("#help").is(":visible")?!0:112===(c?c.keyCode:window.event.keyCode)?(c.preventDefault(),h(),!1):!0});return this.each(function(){b(this).on("click",function(a){a.preventDefault();h();return!1})})};b.fn.turtleHelp.defaults={useF1:!0,index:!0,slide:!1};b.fn.turtleHelp.text={help_title:"Using Turtle gallery",help_pressF1:"Press <b>F1</b> any time to get help!",
index:{help_topNavigation:"Top <b>navigation</b> bar with <b>Home</b> button",help_upOneLevel:"<b>Up</b> one level",help_authorInfo:"Author or company <b>information</b>",help_shareAndLike:"<b>Share</b> and <b>Like</b> buttons for social networking",help_searchNew:"Search <b>new images</b>",help_search:"<b>Search</b> button",help_downloadZip:"<b>Download</b> album or current folder as ZIP file",help_startSlideshow:"Start <b>slideshow</b> <em>Numpad *</em>"},slide:{help_previousPicture:"<b>Previous</b> picture <em>Left arrow</em><em>Swipe right</em>",
help_backToIndex:"Back to <b>thumbnail page</b> / up one level <em>Esc</em>",help_toggleFit:"Toggle <b>fit to screen</b> or <b>1:1</b> size <em>Numpad +</em>",help_toggleInfo:"Show/hide <b>captions</b> and other panels, like Metadata, Map, Shopping, etc. <em>Numpad -</em>",help_toggleThumbnails:"Show/hide <b>thumbnail</b> scroller <em>Numpad -</em>",help_toggleAutoPlay:"Start/stop <b>slideshow</b> <em>Numpad *</em>",help_nextPicture:"<b>Next</b> picture <em>Right arrow</em><em>Swipe left</em>",help_toggleMeta:"Toggle <b>photo data</b>",
help_toggleMap:"Toggle <b>map</b>",help_toggleShop:"Toggle <b>shopping options</b> panel",help_downloadImage:"Download <b>high resolution</b> file",help_shareAndLike:"<b>Share</b> and <b>Like</b> buttons for social networking",help_toggleComments:"Toggle <b>Facebook comments</b>",help_toggleFaces:"Toggle visibility of <b>tagged people</b>"}};b.fn.turtle=function(a,c){a=b.extend({},b.fn.turtle.defaults,a);c=b.fn.turtle.ids;for(var d=getTranslations(b.fn.turtle.text),e=function(c,d,e){b.cookie(c,d,
e);a[c]=d},h="thumbsOn infoOn commentsOn metaOn mapOn regionsOn shopOn shareOn printOn fitImage slideshowDelay slideshowOn".split(" "),j,g=0;g<h.length;g++)if(null!==(j=b.cookie(h[g])))a[h[g]]=j;document.touchMode&&(a.preScale=!1);b.fn.addScroll.defaults.dontDrag="#"+c.map;b.fn.addMap.defaults.zoom=a.mapZoom;b.fn.addMap.defaults.type=a.mapType;b.fn.addMap.defaults.resPath=a.resPath;b.fn.addShop.defaults.id=a.shopId;b.fn.addShop.defaults.path=(a.albumName?a.albumName+"/":"")+a.relPath;b.fn.addShop.defaults.currency=
a.shopCurrency||"EUR";b.fn.addShop.defaults.handling=a.shopHandling||null;b.fn.addShop.defaults.locale=a.shopLocale||"US";b.fn.addShop.defaults.quantityCap=a.shopQuantityCap||0;b.fn.addShop.defaults.discount=a.shopDiscount||0;b.fn.addShop.defaults.options=a.shopOptions||"";b.fn.addShop.defaults.coupons=a.shopCoupons||"";a.shopContinueUrl&&(b.fn.addShop.defaults.continueUrl=a.shopContinueUrl.match(/^https?:/i)?a.shopContinueUrl:window.location.origin+a.shopContinueUrl);b.fn.addPlayer.defaults.backgroundColor=
b("body").css("background-color").rgb2hex();a.linkSlides||(b.fn.addPlayer.defaults.fullScreen=a.videoMaximize,b.fn.addPlayer.defaults.auto=a.videoAuto,b.fn.addPlayer.defaults.solution=a.prioritizeFlash?"flash,html":"html,flash");b.fn.centerThis.defaults.fit=a.fitImage;b.fn.centerThis.defaults.animate=a.transitions;b.fn.centerThis.defaults.padding=a.fitPadding;b.fn.centerThis.defaults.enlarge=!a.fitShrinkonly;b.fn.centerThis.defaults.selector="."+c.main;var n=a.shares,m;for(m in n)n.hasOwnProperty(m)&&
(b.fn.addSocial.defaults[m]=n[m]);a.shareSlides=a.shares&&(a.linkSlides&&a.shares.facebookLike||a.shares.facebook||a.shares.twitter||a.shares.gplus||a.shares.pinterest||a.shares.digg||a.shares.delicious||a.shares.myspace||a.shares.stumbleupon||a.shares.reddit||a.shares.email);var k=Math.round((new Date).getTime()/864E5),p="ms"===VEND&&Modernizr&&!1===Modernizr.opacity,l,r,q,w,x,t,u,f={},s,z,v=null,C=null,y=0,A=null,E=null,D="index"===b("body").attr("id"),G="page"===b("body").attr("id"),B=D&&!a.linkSlides,
H=[],K=!1,I=!1,J=null,V=null,xa=b(window).width(),ya=b(window).height(),za=function(){clearTimeout(V);V=setTimeout(function(){if(!b(".jp-video-full").length){var c=b(window).width(),d=b(window).height();if(c!==xa||d!==ya)v&&v.centerThis({fit:a.fitImage,marginTop:R(),marginBottom:S()}),xa=c,ya=d}},100)},Aa=-1,oa=-1,bb=function(){if(!a.licensee&&(typeof _jaShowAds===UNDEF||_jaShowAds)&&!LOCAL&&!b.cookie("ls")){var c=a.resPath+"/logo.png";b(new Image).load(function(){var a=b("<div>").css({background:"url("+
c+") 10px top no-repeat",textAlign:"left",minHeight:"60px",paddingLeft:"90px"}).html("<h4>Turtle skin <small>"+VER+"</small></h4><p>Unlicensed</p>");b("body").addModal(a,{width:240,defaultButton:!1,autoFade:600});b.cookie("ls",!0)}).attr("src",c)}},cb=function(c){if(q&&q.is(":visible")||document.activeElement&&("INPUT"===document.activeElement.nodeName||"TEXTAREA"===document.activeElement.nodeName)||b.isFunction(a.enableKeyboard)&&!a.enableKeyboard())return!0;switch(c?c.keyCode:window.event.keyCode){case 13:case 10:B?
F():window.location.href=l.eq(y).attr("href");break;case 37:y=(y?y:l.length)-1;O();break;case 38:y&&a.cols&&(y=Math.max(0,y-a.cols));O();break;case 39:y=(y+1)%l.length;O();break;case 40:y<l.length-1&&a.cols&&(y=Math.min(l.length-1,y+a.cols));O();break;case 97:case 35:y=l.length-1;O();break;case 103:case 36:y=0;O();break;case 106:case 179:B&&a.slideshowFullScreen&&(I=!1,b("html").fullScreen(!0));B&&F();W();break;default:return!0}return!1},Fa=function(d){if(q.is(":hidden")||document.activeElement&&
("INPUT"===document.activeElement.nodeName||"TEXTAREA"===document.activeElement.nodeName)||b.isFunction(a.enableKeyboard)&&!a.enableKeyboard())return!0;switch(d?d.keyCode:window.event.keyCode){case 27:aa();break;case 37:d=b("."+c.main);var e=b("."+c.img);d.length&&(d.position().left>=a.fitPadding?ka():(e=Math.round(0.8*e.width()),d.animate({left:Math.min(d.position().left+e,a.fitPadding)},a.scrollDuration)));break;case 38:d=b("."+c.main);e=b("."+c.img);d.length&&!(d.position().top>a.fitPadding)&&
(e=Math.round(0.8*e.width()),d.animate({top:Math.min(d.position().top+e,a.fitPadding)},a.scrollDuration));break;case 39:d=b("."+c.main);e=b("."+c.img);if(d.length)if(d.position().left+d.outerWidth()<=e.width()-a.fitPadding)T();else{var f=Math.round(0.8*e.width());d.animate({left:Math.max(d.position().left-f,e.width()-a.fitPadding-d.outerWidth())},a.scrollDuration)}break;case 40:d=b("."+c.main);e=b("."+c.img);d.length&&!(d.position().top+d.outerHeight()<=e.height()-a.fitPadding)&&(f=Math.round(0.8*
e.width()),d.animate({top:Math.max(d.position().top-f,e.height()-a.fitPadding-d.outerHeight())},a.scrollDuration));break;case 97:case 35:B?F(l.length-1):window.location.href=a.firstPage;break;case 103:case 36:B?F(0):window.location.href=a.firstPage;break;case 106:case 179:A?M():(B&&a.slideshowFullScreen&&(I=!1,b("html").fullScreen(!0)),W());break;case 107:pa();break;case 109:d=a.fitFreespace;a.fitFreespace=!1;a.infoOn||a.thumbsOn?(Ba(),Ca(),v&&d&&v.centerThis({fit:a.fitImage,marginTop:0,marginBottom:0})):
(Da(),Ea(),v&&d&&v.centerThis({fit:a.fitImage,marginTop:s.outerHeight()||0,marginBottom:u.outerHeight()||0}));a.fitFreespace=d;break;default:return!0}return!1},la=function(){(0<a.level?window:parent).location.href=a.uplink||a.indexPage||"../"},aa=function(){B||(a.curr&&b.cookie("curr:"+a.albumName+"/"+a.relPath,a.curr,a.keepPrefs),window.location.href=a.indexPage);if(!a.skipIndex||a.level||a.uplink){var d=b("[role=main]"),e;b.fn.hideAllTooltips();q.is(":visible")?(M(),B&&a.slideshowFullScreen&&b("html").fullScreen(!1),
a.skipIndex?la():(d.length&&d.is(":hidden")&&(d.children().addBack().css({visibility:"visible",display:"block"}),r.children("."+c.cont).trigger("adjust"),setTimeout(function(){r.loadImages()},100)),a.transitions?q.fadeOut(a.speed):q.hide(),v&&(e=v.find("."+c.video+",."+c.audio)).length&&e.trigger("pause"),b("#"+c.map+">."+c.cont).trigger("adjust"),"no"!==a.hash&&b.history.load(""))):d.length&&d.is(":hidden")&&(d.children().addBack().css({visibility:"visible",display:"block"}),setTimeout(function(){r.loadImages()},
100));d.find("[role=scroll]").data("dragOn",!1)}},Ga=function(){var a=l.eq(y).children("img:first");return a.length?(a.data(c.link)||a.data(c.src)).getFile():null},qa=function(a){l.children("."+c.checkbox).toggleClass(c.active,a);q&&q.find("."+c.checkbox).toggleClass(c.active,a)},O=function(d){var e=l.eq(y);l.filter("."+c.active).removeClass(c.active);e.addClass(c.active);!a.skipIndex&&(typeof d===UNDEF||!1===d)&&e.trigger("setactive");z&&(z.filter("."+c.active).removeClass(c.active),z.eq(y).addClass(c.active).trigger("setactive"));
a.mapOnIndex&&b("#"+c.map+" ."+c.cont).trigger("setactive",e.find("img:first").data(c.mapid));y&&b.cookie("curr:"+a.albumName+"/"+a.relPath,y,a.keepPrefs)},Ha=function(){b.cookie("curr:"+a.albumName+"/"+a.relPath,null)},ka=function(){M();if(B)y?F(y-1):"startover"===a.afterLast?F(l.length-1):v.find("."+c.main).trigger("dragcancel");else{var d=b("."+c.controls+" ."+c.prev);d.length&&(d=d.attr("href"))!==NOLINK?window.location.href=d:v.find("."+c.main).trigger("dragcancel")}},T=function(f){var g=[];
if(B)if(y<l.length-1)f?ra():M(),F(y+1);else if("startover"===a.afterLast||A&&a.slideshowLoop)f?ra():M(),F(0);else{Ha();v.find("."+c.main).trigger("dragcancel");switch(a.afterLast){case "onelevelup":a.uplink&&la();break;case "backtoindex":a.skipIndex||aa();break;case "nextfolder":a.nextFoldersFirst&&(window.location.href=a.nextFoldersFirst);break;case "ask":M(),1<l.length&&g.push({t:d.startOver,h:function(){F(0)}}),a.uplink&&g.push({t:0<a.level?d.upOneLevel:a.homepageLinkText||d.backToHome,h:function(){la()}}),
a.skipIndex||g.push({t:d.backToIndex,h:function(){aa()}}),a.nextFoldersFirst&&g.push({t:d.nextFolder,h:function(){window.location.href=a.nextFoldersFirst}}),b("body").addModal(b("<p>",{text:d.atLastPageQuestion}),g,{type:"question",uid:"dialog",title:d.atLastPage,width:500})}v.find("."+c.main).trigger("dragcancel")}else{var h=b("."+c.controls+" ."+c.next);h.length&&(h=h.attr("href"))&&h.length&&h!==NOLINK?(e("slideshowDelay",a.slideshowDelay),A&&e("slideshowOn",f,8),window.location.href=h):"ask"===
a.afterLast&&(M(),v.find("."+c.main).trigger("dragcancel"),Ha(),a.firstPage&&g.push({t:d.startOver,h:function(){A&&e("slideshowOn",null!=A,8);window.location.href=a.firstPage}}),a.uplink&&g.push({t:0<a.level?d.upOneLevel:a.homepageLinkText||d.backToHome,h:function(){la()}}),a.indexPage&&g.push({t:d.backToIndex,h:function(){window.location.href=a.indexPage}}),a.nextFoldersFirst&&g.push({t:d.nextFolder,h:function(){window.location.href=a.nextFoldersFirst}}),b("body").addModal(b("<p>",{text:d.atLastPageQuestion}),
g,{uid:"dialog",type:"question",title:d.atLastPage,width:500}))}},Ia=function(){E&&(E=clearTimeout(A),A=setTimeout(function(){T(!0)},300))},ra=function(){A&&(clearTimeout(A),A=setTimeout(function(){T(!0)},a.slideshowDelay))},W=function(){A=clearTimeout(A);var d;f.play.hide();f.pause.showin();(d=v.find("."+c.video+",."+c.audio)).length&&(d.data("playing")||a.videoAuto)?(E=!0,d.trigger("setEndedFn",Ia)):A=setTimeout(function(){T(!0)},a.slideshowDelay);a.bgAudioId&&b(a.bgAudioId).trigger("play");L()},
M=function(){E=!1;if(A){var d;f.pause.hide();f.play.showin();A=clearTimeout(A);L();B?a.bgAudioId&&b(a.bgAudioId).trigger("pause"):e("slideshowOn",!1);(d=v.find("."+c.video+",."+c.audio)).length&&(d.data("playing")||a.videoAuto)&&d.trigger("setEndedFn",null)}},da=!1,sa=function(){!I&&!da&&(da=!0,t.stop(!0,!1).fadeTo(200,0.8,function(){p&&t.css("filter",null)}),J=setTimeout(function(){L()},1500))},L=function(){I?J=setTimeout(function(){L()},750):(da=!1,J=clearTimeout(J),t.fadeTo(500,a.controlOutOpacity))},
db=function(d){if(d.target&&("A"===d.target.nodeName||b(d.target).parents("."+c.bottom).length))return!0;da?(da=!1,J=clearTimeout(J),t.fadeTo(500,a.controlOutOpacity)):sa();return!0},Ca=function(){a.infoOn&&(f.hideInfo.hide(),f.showInfo.showin(),a.transitions?u.animate({bottom:-u.outerHeight()},500,function(){u.hide()}):u.css({bottom:-u.outerHeight()}).hide(),v&&a.fitFreespace&&v.centerThis({fit:a.fitImage,marginTop:R(),marginBottom:0}),L(),e("infoOn",!1))},Ea=function(){if(!a.infoOn){f.showInfo.hide();
f.hideInfo.showin();u.is(":hidden")&&u.show().css({bottom:-u.outerHeight()});var b=function(){u.children("."+c.map).trigger("adjust")};a.transitions?u.animate({bottom:0},500,b):(u.show().css({bottom:0}),b());v&&a.fitFreespace&&v.centerThis({fit:a.fitImage,marginTop:R(),marginBottom:u.outerHeight()});L();e("infoOn",!0)}},Ba=function(){a.thumbsOn&&(f.hideThumbs.hide(),f.showThumbs.showin(),a.transitions?x.animate({top:-s.outerHeight()-10},500):x.css({top:-s.outerHeight()-10}),v&&a.fitFreespace&&v.centerThis({fit:a.fitImage,
marginTop:0,marginBottom:S()}),L(),e("thumbsOn",!1))},Da=function(){a.thumbsOn||(f.showThumbs.hide(),f.hideThumbs.showin(),a.transitions?x.animate({top:0},500):x.css({top:0}),v&&a.fitFreespace&&v.centerThis({fit:a.fitImage,marginTop:s.outerHeight(),marginBottom:S()}),L(),e("thumbsOn",!0))},R=function(){return a.fitFreespace&&0<=x.position().top?s.outerHeight()||0:0},S=function(){return a.fitFreespace&&u.is(":visible")?u.outerHeight()||0:0},pa=function(){a.fitImage?Ja():Ka()},Ja=function(){a.hideFitBtn||
(f.noresize.hide(),f.resize.showin());b.fn.centerThis.defaults.enlarge=!a.fitShrinkonly;v.centerThis({fit:!1,marginTop:R(),marginBottom:S()});L();e("fitImage",!1)},Ka=function(){a.hideFitBtn||(f.resize.hide(),f.noresize.showin());b.fn.centerThis.defaults.enlarge=!0;v.centerThis({fit:!0,marginTop:R(),marginBottom:S()});L();e("fitImage",!0)},eb=function(a){a.preventDefault();if(!0===b(this).parents("[role=scroll]").data("dragOn"))return!1;F(b(this));return!1},ma=function(a){a&&a.length&&(a.stop(),a.trigger("destroy"),
a.find("."+c.video+",."+c.audio).trigger("destroy"),a.find("."+c.share+"-"+c.icon).trigger("destroy"),a.find("."+c.map).trigger("destroy"),a.remove())},fb=function(d){var e,f;if(f=d)if(f=d.length){if("number"===a.hash)d=(parseInt(d,10)||1)-1;else a:{var g;for(f=0;f<l.length;f++)if(g=l.eq(f).children("img:first"),(g=g.length&&(g.data(c.link)||g.data(c.src)).getFile())&&g===d){d=f;break a}d=-1}f=0<=(e=d)&&e<l.length}f?(F(e,!1),a.slideshowAuto=!1):(aa(),"ms"==VEND&&setTimeout(function(){b("[role=main]").show();
b("[role=scroll]").trigger("adjust")},10))},La=function(c){"number"===a.hash?b.history.load(c+1):(c=Ga())&&b.history.load(c)},F=function(e,f){typeof f===UNDEF&&(f=!0);if("number"!==typeof e){var g;if(e){g=e;var h;if(null==g)h=y;else if("number"===typeof g)h=Math.minMax(0,g,l.length);else if(0>(h=l.index(g))&&z)h=z.index(g);g=h}else g=y;e=g}q.is(":hidden")&&(v&&v.data("curr")!==e&&ma(v),a.transitions?q.fadeIn(a.speed):q.show(),b.fn.hideAllTooltips(),s.children(":first").loadImages());if(v&&v.data("curr")===
e)!1!==f&&La(e);else{g=l.eq(e);var j=g.attr("href"),k=g.children("img").eq(0),m,p;if(k.length){v&&(ma(C),C=v,C.css({zIndex:0}),setTimeout(function(a){a.trigger("unswipe")},50,C.find("."+c.main)),document.touchMode||C.unmousewheel());(m=q.children("."+c.img).not(v)).length&&m.stop().remove();v=b("<div>",{id:"img"+e,"class":c.img}).css({zIndex:1,display:"none"}).data({curr:e}).appendTo(q);if(a.clickBesideForIndex&&(!a.skipIndex||a.level||a.uplink))v.on("click",function(a){if(b(a.target).hasClass("img"))return a.preventDefault(),
aa(),!1});w.css({opacity:0,display:"block"}).animate({opacity:1});y=e;O();B&&f&&La(y);var n=b("<div>",{"class":c.main});if(k.data(c.isother)||!j)h=Math.max(k.data(c.width)||q.width()-160,280),p=Math.max(k.data(c.height)||q.height()-120,200),n.addClass(c.other),(j=k.data(c.content))&&(j=j.trim()).length?n.css({width:h,height:p}).append(j.match(/^https?:\/\//i)?b("<iframe>",{width:"100%",height:"100%",src:j,frameborder:0,allowfullscreen:"allowfullscreen"}):j):(n.append(b("<a>",{href:k.data(c.link),
target:"_blank"})),n.append(b("<p>",{text:d.clickToOpen})),n.children("a:first").append(k.clone())),ba(n);else if(k.data(c.isvideo)||k.data(c.isaudio)){h=k.data(c.width)||q.width()-160;p=k.data(c.height)||q.height()-120;(E=A)&&(A=clearTimeout(A));if(k.data(c.isvideo)){var j=q.width()-40,r=q.height()-40;if(h>j||p>r)j=Math.min(j/h,r/p),h=Math.round(h*j),p=Math.round(p*j);n.addClass(c.video)}else h=Math.max(240,k.data(c.width)||0),p=Math.max(180,k.data(c.height)||0),n.addClass(c.audio);n.css({width:h,
height:p}).data({ow:h,oh:p});setTimeout(function(){m=n.addPlayer({src:k.data(c.link),title:a.showVideoTitle?k.attr("alt"):"",poster:k.data(c.poster),ended:Ia,resPath:a.resPath})},a.speed/3);ba(n)}else h=k.data(c.width),p=k.data(c.height),r=b(new Image),n.addClass(c.image).append(r).css({width:h,height:p}).data({ow:h,oh:p}),r.attr({src:j,width:h||"auto",height:p||"auto"}),r[0].complete?(k.data("cached",!0),ba(n)):r.on("load",function(){k.data("cached",!0);ba(n)}).prop({src:j});if((m=g.find(".checkbox")).length)n.append(m=
m.clone()),m.on("click",function(a){a.preventDefault();a=b(this).hasClass(c.active);b(this).toggleClass(c.active,!a);l.filter("."+c.active).find("."+c.checkbox).toggleClass(c.active,!a);return!1});Ma(k,e)}}},Na=function(a){a&&a.length&&(a.data(c.kill,!0),setTimeout(function(){a&&a.removeData(c.kill)},500))},gb=function(a){a=b(a.target).parents("."+c.main);!a.data(c.kill)&&!a[0].dragOn&&(Na(a),T());return!1},hb=function(a,d){a.preventDefault();var e=b(a.target).parents("."+c.img);e.data(c.kill)||(Na(e),
0<d?ka():T());return!1},Oa=function(a){var d=a.attr("href"),e=a.children("img").eq(0);d&&(e&&!e.data("cached")&&!e.data(c.isvideo)&&!e.data(c.isother))&&b("<img>").on("load",function(){e.data("cached",!0)}).attr({src:d})},ba=function(d){w&&w.length&&(a.transitions?w.stop(!0,!1).animate({opacity:0},{duration:100,complete:function(){b(this).hide()}}):w.hide());if(B)a.transitions?C&&C.stop(!0,!1).animate({opacity:0},a.speed/2,"linear",function(){ma(C)}):ma(C),v.children().not("."+c.bottom).remove(),
v.append(d);else if(d=v.find("."+c.main),!d.length)return;var e=d.hasClass(c.image),f=d;if(a.rightClickProtect)f.on("contextmenu",noAction);setTimeout(function(){if(!document.touchMode&&a.enableMouseWheel)v.on("mousewheel",hb);if(document.touchMode)A||sa(),v[0].addEventListener(TOUCH_START,db),f.on({click:noAction,dbltap:pa});else if(1<l.length||!B)if(f.hasClass(c.image)&&a.clickForNext)f.on("click",gb);else f.on({click:noAction,dblclick:pa});f.hasClass(c.image)&&f.addSwipe(T,ka)},a.speed/2);setTimeout(function(){a.transitions?
v.css({opacity:0,display:"block"}).animate({opacity:1},{duration:a.speed,complete:p?function(){v.css({filter:""})}:null}).centerThis({init:!0,speed:Math.round(0.75*a.speed),marginTop:R(),marginBottom:S(),preScale:e&&a.preScale,animate:e&&a.preScale&&1!==a.preScale,fit:a.fitImage}):v.show().centerThis({init:!0,marginTop:R(),marginBottom:S(),fit:a.fitImage});var b=y,d=v.find("nav a."+c.regions+"-icon").eq(0);d.length&&(b=l.eq(b).find("img:first"),d.addRegions(v.find("."+c.main).eq(0),b.data(c.regions)))},
50);B?(y<l.length-1&&Oa(l.eq(y+1)),0<y&&Oa(l.eq(y-1))):a.slideshowOn&&W()},Ma=function(f,g){var h,j,k,p,m=Math.round(0.8*v.width())-30,n=!(f.data(c.isvideo)||f.data(c.isaudio)||f.data(c.isother));B?(u=b("<div>",{"class":c.bottom}).appendTo(v),h=b("<div>",{"class":c.cont}).appendTo(u),typeof g!==UNDEF&&a.showImageNumbers&&h.append('<h4 class="nr"><strong>'+(g+1)+"</strong> / "+l.length+"</h4>"),(k=f.data(c.caption))&&h.append(k)):h=u.children("."+c.cont);j=b("<nav>",{"class":"buttons"}).prependTo(h);
h.width()>m&&h.width(m);var r=function(d){d.preventDefault();var f=b(d.target);d=f.data("rel");var g=h.children("."+d),j=g.is(":visible"),k=S(),l=g.outerHeight(!0);f.toggleClass(c.active,!j);d===c.map?(f=function(){j||g.children("."+c.mapcont).trigger("adjust")},a.transitions?g.slideToggle("fast",f):(g.toggle(),setTimeout(f,50))):a.transitions?g.slideToggle("fast"):g.toggle();v&&a.fitFreespace&&v.centerThis({fit:a.fitImage,marginTop:R(),marginBottom:k+(j?-l:l)});e(d+"On",!j);return!1},m=function(a,
d){var e=b("<div>",{"class":c.panel+" "+a}).data("rel",a);if(d)var f=h.find("."+c.panel).eq(0),e=f.length?e.insertBefore(f):e.appendTo(h);else e=e.appendTo(h);e.append(b("<div>",{"class":c.icon}));return e},q=function(e){var f=b("<a>",{"class":e+"-"+c.icon}).data("rel",e).appendTo(j);a.buttonLabels&&f.text(d[e+"Btn"]||e);document.touchMode||f.addTooltip(d[e+"Label"]||(a.buttonLabels?"":d[e+"Btn"]||e));f.on("click",r);return f};if(a.shareSlides){var s;a.shareInline?(s=m(c.share,!0),q(c.share),s=b("<div>",
{"class":c.shares}).css("min-height","25px").appendTo(s)):(s=b("<a>",{"class":c.share+"-"+c.icon}).appendTo(j),a.buttonLabels&&s.text(d.shareBtn));B?(p="number"===a.hash?y+1:Ga(),setTimeout(function(){s.addSocial({hash:p,inline:a.shareInline,buttonLabels:a.shareLabels,title:(f.data(c.caption)||"").stripHTML(),image:f.data(c.src)})},a.speed/2)):s.addSocial({useHash:!1,inline:a.shareInline,buttonLabels:a.shareLabels,title:(f.data(c.caption)||"").stripHTML(),image:f.data(c.src)})}var t;if(!B&&(t=h.children("."+
c.comments)).length)t.data("rel",c.comments),q(c.comments);for(var w=[c.meta,c.map,c.shop,c.print],x=0;x<w.length;x++)if(t=w[x],null!=f.data(t)&&(t!=c.map||a.mapOnSlide))m(t),q(t);if(n){if(a.fotomotoOn){var A=b("<a>",{"class":c.fotomoto+"-"+c.icon,text:a.buttonLabels?d.fotomotoBtn:""}).appendTo(j);A.addTooltip(LOCAL?d.locationWarning:"<h5>Fotomoto</h5>"+d.fotomotoLabel);setTimeout(function(){A.on("click",function(b){b.preventDefault();typeof FOTOMOTO!==UNDEF&&!LOCAL&&FOTOMOTO.API.showWindow(10,f.data(c.link)||
(B?f.data(c.src):f.attr("src")).replace(a.thumbs+"/",a.slides+"/"));return!1})},a.speed)}if(k=f.data(c.mostphotos))k.startsWith("http")||(k="http://www.mostphotos.com/"+k),b("<a>",{href:k,"class":c.mostphotos+"-"+c.icon,text:a.buttonLabels?d.mostphotosBtn:"",target:"_blank"}).appendTo(j).addTooltip("<h5>"+d.mostphotosBtn+"</h5>"+d.mostphotosLabel);f.data(c.regions)&&(m=b("<a>",{"class":c.regions+"-"+c.icon}).appendTo(j),a.buttonLabels&&m.text(d.people),a[c.regions+"On"]&&m.addClass(c.active),m.on("click",
function(){e(c.regions+"On",!b(this).hasClass(c.active))}))}if((k=f.data(c.link))&&(!n&&a.downloadNonImages||n&&!a.rightClickProtect))n=b("<a>",{href:k,"class":c.link+"-"+c.icon,download:"",target:"_blank"}).appendTo(j),a.buttonLabels&&n.text(f.data(c.isoriginal)?d.original:d.hiRes),n.addTooltip((a.buttonLabels?"":"<strong>"+(f.data(c.isoriginal)?d.original:d.hiRes)+"</strong><br>")+("download"in n[0]?"":"<small>"+d.saveTip+"<br>")+'<input class="fullw" type="text" value="'+k.fullUrl()+'" readonly></small>',
{stay:5E3});a.imgHook&&(n=b("<a>",{"class":c.custom+"-"+c.icon}).appendTo(j),a.buttonLabels&&a.imgHookBtn&&n.text(a.imgHookBtn),n.on("click",function(d){d.preventDefault();d=f.data(c.link)||(B?f.data(c.src):f.attr("src")).replace(a.thumbs+"/","");b("body").addModal(b(a.imgHook.replace(/\%fileName\%/g,d)),{uid:c.custom,width:a.imgHookWidth||600,title:a.imgHookBtn,defaultButton:"okButton",resizable:!0,savePosition:!0});return!1}));a.imgHookFn&&b.isFunction(a.imgHookFn)&&a.imgHookFn.call(f);h.children("."+
c.panel).each(function(){var d=b(this),e=d.data("rel");if(e&&null!==(k=f.data(e))){if(e===c.map){var g=b("<div>",{"class":c.mapcont}).appendTo(d);g.width(h.width()-30);if(a.mapAll)g.addMap({click:function(){B?F(this.link):window.location.href=this.link},markers:H,curr:parseInt(B?f.data(c.mapid):z.filter("."+c.active).find("img:first").data(c.mapid),10)});else{var l=(f.data(c.caption)||"").stripHTML()||f.attr("alt")||y+1+"";g.addMap({map:k,label:l})}setTimeout(function(){g.trigger("adjust")},a.speed)}else if(e===
c.shop){l={};"+"!==k&&(l.options=k);if(null!==(k=f.data(c.discount)))l.discount=k;d.addShop(f.closest("a"),l)}else d.append(k);a[e+"On"]?j.children("a."+e+"-icon").addClass(c.active):d.hide()}});j.html().length||j.remove();a.infoOn||u.hide()},ib=function(){var e=b("<div>",{"class":c.feedback}),f=window.location.href.getDir(),g=b("<form>",{id:c.feedback}).appendTo(e);a.directKey&&(g.append('<input type="hidden" name="from" value="'+a.feedbackEmail.replace("|","@")+'">'),g.append('<input type="hidden" name="to" value="'+
xDecrypt(a.directKey)+'">'),g.append(b('<p class="email"><label for="email">'+d.yourEmail+'</label><input id="email" name="email" type="email"></p>')));g.append(b('<p class="subject"><label for="subject">'+d.subject+'</label><input id="subject" name="subject" value="'+a.albumName+(a.relPath.length?"/"+a.relPath:"")+'"></p>'));g.append(b('<p class="message"><label for="message">'+d.message+'</label><textarea id="message" name="message"></textarea></p>'));l.filter(function(){return b(this).children("."+
c.active).length}).each(function(a){var e=b(this).find("img").eq(0),h=e.data("src"),e=(e.data(c.isimage)||e.data(c.isother)?h:e.data("link")||"").getFile();g.append(b('<div><aside><img src="'+h+'"></aside><div><a class="remove">&times;</a><label for="img'+a+'">'+e+'</label><input type="hidden" name="file['+(a+1)+']" value="'+f+"#"+encodeURIComponent(e)+'"><textarea id="img'+a+'" name="comment['+(a+1)+']" placeholder="'+d.comment+'"></textarea></div></div>'))});g.find("a.remove").on("click",function(a){a.preventDefault();
b(this).parents("div").eq(1).remove();return!1});var h=function(c){if(!c||!c.length)return console&&console.log("Submitform Error: Missing form"),!1;var e,f=!1;c=c.find("form").eq(0);var g=window.location.href.split("#")[0];if(a.directKey){e=c.find("input#email").val();if(!e.length||!e.match(/^\S+@\S+[\.][0-9a-z]+$/))return b("body").addModal(b("<div>",{html:d.emailMissing}),{type:"error"}),!1;b.ajax({url:"http://jalbum.net/integration/api/sendmail.json",dataType:"jsonp",data:c.serialize(),success:function(a){"Ok"===
a.Result?b("body").addModal(b("<div>",{html:d.messageSent}),{autoFade:1500}):(f=!0,DEBUG&&console&&console.log("Error sending mail: Result="+a.Result+" Cause="+a.Cause),b("body").addModal(b("<div>",{html:"<h3>"+d.errorSending+'</h3><p class="err">'+a.Result+", "+a.Cause+"</p>"}),{type:"error"}))}});if(f)return!1}else if(a.php)b.ajax({url:resPath+"feddback.php",type:"POST",data:{message:c.serialize(),subject:"Subject of your e-mail"},success:function(a){alert("You data has been successfully e-mailed");
alert("Your server-side script said: "+a)}});else{var h="mailto:"+encodeURIComponent(a.feedbackEmail.replace("|","@")),h=h+("?subject="+encodeURIComponent(c.find("input#subject").val())),h=h+"&body=";if(e=c.find("textarea#message").val())h+=encodeURIComponent(e+"\n\n");c.children("div").each(function(a){h+=encodeURIComponent(a+1+". "+g+"#"+encodeURIComponent(b(this).find("label").eq(0).text())+"\n");if(e=b(this).find("textarea").val())h+=encodeURIComponent(e+"\n");h+=encodeURIComponent("\n")});if(2048<
h.length)return b("body").addModal(b("<div>",{html:"<p>"+d.tooLong+"</p>"}),{type:"error"}),!1;window.location.href=h}return!0};g.on("submit",function(){return h(b("#feedback"))});b("body").addModal(e,[{t:d.send,h:h}],{uid:"feedback",enableKeyboard:!1,title:d.sendFeedback,width:480,resizable:!0,savePosition:!0});return!1},jb=function(){var a=!1,e=l.filter(function(){var d=b(this),e;return d.children("."+c.checkbox).hasClass(c.active)?(d=d.children("img:first"),e=d.data(c.shop),a=!0,!(e&&"+"!==e||
d.data(c.discount))):!1});if(0===e.length)b("body").addModal(b("<h3>"+d.noItemsSelected+"</h3><p>"+(a?d.nonShoppableItems:d.selectItemsHint)+"</p>"),{type:"warning"});else{var f=b("<div>",{"class":c.shopAll});window.location.href.getDir();var g=b("<ul>",{"class":c.thumbs}).appendTo(f);e.each(function(){g.append(b("<li>").append(b("<img>",{src:b(this).children("img:first").data("src")})))});b("<div>",{"class":c.shop}).appendTo(f).addShop(e);b("body").addModal(f,{uid:c.shopAll+"w",title:d.buyNItems.replace("{0}",
e.length),width:640,resizable:!0,savePosition:!0,enableKeyboard:!1,blocking:!0,defaultButton:"close"})}},Pa=function(){var c=0;t.children().each(function(){"none"!==b(this).css("display")&&(c+=b(this).outerWidth())});t.css({marginLeft:-Math.floor(c/2)}).width(c);document.touchMode||t.children("a").not(f.play).addTooltip({delay:500});var d=b("<div>",{"class":"slideshowdelay",text:f.play.prop("title")}),g=b("<form>").appendTo(d);g.on("submit",function(a){a.preventDefault();W();return!1}).append(b("<input>",
{type:"text",value:a.slideshowDelay/1E3}).focus().on("change",function(){e("slideshowDelay",Math.round(parseFloat(1E3*b(this).val())||b.fn.turtle.defaults.slideshowDelay));return!0})).append(b("<a>",{"class":"button",href:NOLINK,text:" "}).on("click",ta));g.find("input");f.play.prop("title","").addTooltip(d,{stay:5E3});document.touchMode||(B?t.hide():J=setTimeout(function(){L()},1500));t.on({mouseenter:function(){I=!0;b(this).stop(!0,!1).fadeTo(200,1)},mouseleave:function(){I=!1;b(this).stop(!0,!1).fadeTo(200,
0.8)}});if(!document.touchMode)q.on("mousemove",function(a){if(!K&&(Aa-a.clientY||oa-a.clientX))0<=oa&&sa(),oa=a.clientX,Aa=a.clientY})},kb=function(a){a.preventDefault();M();ka();return!1},lb=function(a){a.preventDefault();M();aa();return!1},mb=function(){a.curr&&b.cookie("curr:"+a.albumName+"/"+a.relPath,a.curr,600);return!0},Qa=function(a){a.preventDefault();Ja();return!1},Ra=function(a){a.preventDefault();Ka();return!1},Sa=function(a){a.preventDefault();Ca();return!1},Ta=function(a){a.preventDefault();
Ea();return!1},Ua=function(a){a.preventDefault();Ba();return!1},Va=function(a){a.preventDefault();Da();return!1},ta=function(c){c.preventDefault();B&&a.slideshowFullScreen&&(I=!1,b("html").fullScreen(!0));W();return!1},Wa=function(a){a.preventDefault();M();return!1},Xa=function(a){a.preventDefault();ra();T();return!1};if(D){setTimeout(bb,1E3);l=b(this).find("td > a");var ea=b(a.header);if(ea&&ea.length){if(D&&(l.length&&a.showStart)&&ea){var fa=b("<div>",{"class":c.startShow}).appendTo(ea),ua=b("<div>",
{"class":c.startTxt,width:"auto",text:d.startSlideshow}).appendTo("body"),Ya=fa.width(),Za=ua.outerWidth();fa.append(ua);if(Ya<Za)ua.on({mouseenter:function(){fa.stop(!0,!1).animate({width:Za},500)},mouseleave:function(){fa.stop(!0,!1).animate({width:Ya},500)}});fa.on({click:function(d){if(B)return d.preventDefault(),a.slideshowFullScreen&&b("html").fullScreen(!0),y===l.length-1?F(0):F(),l.length&&setTimeout(W,1E3),!1;e("slideshowOn",!0,8);window.location.href=l.filter("."+c.active).attr("href")}})}a.uplink=
ea.find("."+c.parent+">a").attr("href")||""}r=b("."+c.items);if(l.length){var ga,ha,nb=function(){var c=l.index(b(this));c&&b.cookie("curr:"+a.albumName+"/"+a.relPath,c,a.keepPrefs)};l.each(function(){ga=b(this);ha=ga.find("img").eq(0);if(ha.length){if(a.rightClickProtect)ga.on("contextmenu",noAction);ha.attr("src").endsWith("/"+a.loadImg)&&ha.addClass(c.toload);a.markNewDays&&k-parseInt(ha.data(c.modified)||0,10)<=a.markNewDays&&ga.append(b("<span>",{"class":c.newItem,text:d.newItem}));document.touchMode||
ga.addTooltip({delay:500});if(!B)l.on("click",nb)}});setTimeout(function(){r.loadImages();setTimeout(function(){r.loadImages()},1200)},100);var $a=function(){r.loadImages();return!0};document.touchMode&&(r[0].addEventListener("scroll",$a),r[0].addEventListener(TOUCH_END,$a));l.children("."+c.checkbox).on("click",function(a){a.preventDefault();a=b(this).hasClass(c.active);b(this).toggleClass(c.active,!a);b(this).parent().hasClass(c.active)&&q.find("."+c.checkbox).toggleClass(c.active,!a);return!1}).on(document.touchMode?
"dbltap":"dblclick",function(a){a.preventDefault();qa(!b(this).hasClass(c.active));return!1});b("#"+c.selectAll).on("click",function(a){a.preventDefault();qa(!0);return!1});b("#"+c.selectNone).on("click",function(a){a.preventDefault();qa(!1);return!1});b("#"+c.shopAll).on("click",jb)}r.find("."+c.folders).on("click",function(){b.cookie("curr:"+a.albumName+"/"+a.relPath,null);return!0});b("#"+c.feedback).on("click",ib);if(l.length){if(a.mapOnIndex||a.mapAll&&a.mapOnSlide)H=l.collectMarkers({dynamic:B});
a.mapOnIndex&&H.length&&b("#"+c.map+" ."+c.cont).addMap({click:function(){B?F(this.link):window.location.href=this.link},markers:H,range:999,curr:0});null===(y=b.cookie("curr:"+a.albumName+"/"+a.relPath))||y>=l.length?(y=0,O(!0)):setTimeout(function(){O()},300);if(b.isFunction(a.enableKeyboard)||a.enableKeyboard)b(window).on("keydown",cb)}if(l.length&&B){l.on("click",eb);q=b("<div>",{"class":c.gallery}).attr("role","gallery").appendTo("body");w=b("<div>",{"class":c.wait}).appendTo(q);x=b("<div>",
{"class":c.navigation}).appendTo(q);var ia,N,ab,X,U,na=0,Y,ca,P,Q,va;s=b("<div>",{"class":c.scrollbox}).appendTo(x);U=b("<div>",{"class":"wrap"}).appendTo(s);U=b("<ul>",{"class":c.cont+" "+c.load}).appendTo(U);l.each(function(){ia=b(this);X=ia.find("img").eq(0);if(X.length){N=b("<a>",{href:NOLINK}).appendTo(b("<li>").appendTo(U));if(!Y){if(isNaN(Y=parseInt(N.css("width"),10)))Y=133;if(isNaN(ca=parseInt(N.css("height"),10)))ca=100}P=X.attr("width");Q=X.attr("height");if(P>Y||Q>ca)P/Y>Q/ca?(Q=Math.round(Q*
Y/P),P=Y):(P=Math.round(P*ca/Q),Q=ca);ab=b("<img>",{src:X.attr("src"),"class":X.attr("class")}).data({src:X.data("src")}).appendTo(N);P&&Q&&ab.attr({width:P,height:Q});va=ia.children("."+c.newItem);va.length&&N.append(va.clone());document.touchMode||N.addTooltip(ia.data("hint")||ia.siblings("."+c.caption).html(),{delay:500})}});N=U.children("li").first();N.length&&(na=isNaN(na=parseInt(N.css("width"),10))?135:na+((parseInt(N.css("marginLeft"),10)||0)+(parseInt(N.css("marginRight"),10)||0)),U.width(na*
U.children().length+2));U.scrollThumbs({enableMouseWheel:a.enableMouseWheel});z=s.find("li > a");z.on("click",function(){if(!0===b(this).parents("[role=scroll]").data("dragOn"))return!1;b(this).hasClass(c.active)||(M(),F(z.index(b(this))));O();return!1});t=b("<nav>",{"class":c.controls+" clearfix"}).appendTo(x);f.prev=b("<a>",{"class":c.prev,title:d.previousPicture}).appendTo(t);if(!a.skipIndex||a.level||a.uplink)f.up=b("<a>",{"class":c.up,title:a.skipIndex?d.upOneLevel:d.backToIndex}).appendTo(t);
f.noresize=b("<a>",{"class":c.noresize,title:d.oneToOneSize}).appendTo(t);f.resize=b("<a>",{"class":c.resize,title:d.fitToScreen}).appendTo(t);a.hideFitBtn?f.resize.add(f.noresize).hide():(f.resize.togglein(!a.fitImage),f.noresize.togglein(a.fitImage));f.hideThumbs=b("<a>",{"class":c.hideThumbs,title:d.hideThumbs}).appendTo(t);f.showThumbs=b("<a>",{"class":c.showThumbs,title:d.showThumbs}).appendTo(t);f.showThumbs.togglein(!a.thumbsOn);f.hideThumbs.togglein(a.thumbsOn);f.hideInfo=b("<a>",{"class":c.hideInfo,
title:d.hideInfo}).appendTo(t);f.showInfo=b("<a>",{"class":c.showInfo,title:d.showInfo}).appendTo(t);f.showInfo.togglein(!a.infoOn);f.hideInfo.togglein(a.infoOn);f.play=b("<a>",{"class":c.play,title:d.startAutoplay}).appendTo(t);f.pause=b("<a>",{"class":c.pause,title:d.stopAutoplay}).appendTo(t);1<l.length?(f.play.togglein(!a.slideshowAuto),f.pause.togglein(a.slideshowAuto)):f.play.add(f.pause).hide();f.next=b("<a>",{"class":c.next,title:d.nextPicture}).appendTo(t);f.prev.on("click",kb);if(f.up)f.up.on("click",
lb);f.noresize.on("click",Qa);f.resize.on("click",Ra);f.hideInfo.on("click",Sa);f.showInfo.on("click",Ta);f.hideThumbs.on("click",Ua);f.showThumbs.on("click",Va);f.play.on("click",ta);f.pause.on("click",Wa);f.next.on("click",Xa);Pa();a.thumbsOn||x.css("top",-s.outerHeight()-10);s.on({mouseenter:function(){L();K=!0},mouseleave:function(){K=!1}});"page"!==b("body").attr("id")&&(a.hash&&"no"!==a.hash)&&b.history.init(fb);a.slideshowAuto?(B&&a.slideshowFullScreen&&b("html").fullScreen(!0),F(y),W()):a.skipIndex&&
F(y);if(b.isFunction(a.enableKeyboard)||a.enableKeyboard)b(window).on("keydown",Fa)}}else{l=b(this);q=b("."+c.gallery);x=b("."+c.navigation);t=b("."+c.controls);v=b("."+c.img);u=b("."+c.bottom);l=v.children("."+c.main);y=0;s=b("."+c.scrollbox);z=s.find("li > a");var Z=l.find("img:first");a.mapAll&&(H=z.collectMarkers());var wa=s.find("."+c.cont),ja=0;document.touchMode||z.addTooltip({delay:500}).each(function(){ja+=b(this).outerWidth()});ja+=2*z.length;wa.width(ja);wa.scrollThumbs({enableMouseWheel:a.enableMouseWheel});
z.on("click",function(){return!b(this).parents("[role=scroll]").data("dragOn")});wa.trigger("setactive");a.thumbsOn||x.css("top",-s.outerHeight()-10);f.prev=t.children("."+c.prev);f.up=t.children("."+c.up);f.noresize=t.children("."+c.noresize);f.resize=t.children("."+c.resize);f.hideInfo=t.children("."+c.hideInfo);f.showInfo=t.children("."+c.showInfo);f.hideThumbs=t.children("."+c.hideThumbs);f.showThumbs=t.children("."+c.showThumbs);f.play=t.children("."+c.play);f.pause=t.children("."+c.pause);f.next=
t.children("."+c.next);1<s.find("."+c.cont+" a").length?(f.play.togglein(!a.slideshowAuto),f.pause.togglein(a.slideshowAuto)):f.play.add(f.pause).hide();a.hideFitBtn&&f.resize.add(f.noresize).hide();if(f.up)f.up.on("click",mb);f.noresize.on("click",Qa);f.resize.on("click",Ra);f.hideInfo.on("click",Sa);f.showInfo.on("click",Ta);f.hideThumbs.on("click",Ua);f.showThumbs.on("click",Va);f.play.on("click",ta);f.pause.on("click",Wa);f.next.on("click",Xa);Pa();a.thumbsOn?(f.showThumbs.hide(),f.hideThumbs.showin(),
x.css({top:0}).removeClass("hide")):(f.hideThumbs.hide(),f.showThumbs.showin(),x.css({top:-s.outerHeight()-10}).removeClass("hide"));a.infoOn?(f.showInfo.hide(),f.hideInfo.showin(),u.show().css({bottom:0})):(f.hideInfo.hide(),f.showInfo.showin(),u.css({bottom:-u.outerHeight()}).hide());a.hideFitBtn||(a.fitImage?(f.resize.hide(),f.noresize.showin()):(f.noresize.hide(),f.resize.showin()));Z.length&&(l.hasClass(c.image)&&!Z[0].complete?(Z.on("load",function(){Z.data("cached",!0);ba()}).attr({src:Z.attr("src")}),
w=b("<div>",{"class":c.wait}).appendTo(q),w.fadeIn()):(Z.data("cached",!0),ba()),Ma(Z));if(b.isFunction(a.enableKeyboard)||a.enableKeyboard)b(window).on("keydown",Fa)}if(l.length&&B||!G)if(b(window).on("resize",za),document.touchMode)b(window).on("orientationchange",za);return this};b.fn.turtle.defaults={header:"#main header",slides:"slides",thumbs:"thumbs",linkSlides:!1,loadImg:"blank.png",hash:"fileName",resPath:"res/",relPath:"",level:0,skipIndex:!1,showStart:!0,keepPrefs:600,speed:600,controlbarOpacity:0,
controlOutOpacity:0,transitions:!0,preScale:0.95,slideshowDelay:4E3,slideshowLoop:!1,slideshowAuto:!1,slideshowFullScreen:!1,markNewDays:0,afterLast:"ask",thumbsOn:!1,fitImage:!1,fitShrinkonly:!1,fitFreespace:!0,hideFitBtn:!1,fitPadding:15,borderWidth:10,clickForNext:!0,clickBesideForIndex:!1,rightClickProtect:!1,showImageNumbers:!0,buttonLabels:!1,infoOn:!0,metaOn:!1,mapOn:!1,mapOnIndex:!1,mapOnSlide:!1,mapType:"roadmap",mapZoom:18,mapAll:!1,shopOn:!0,shopGateway:"paypal",shopCurrency:"USD",shareOn:!1,
commentOn:!1,printOn:!1,regionsOn:!1,downloadNonImages:!1,enableKeyboard:!0,enableMouseWheel:!0,videoAuto:!1,videoMaximize:!1,videoTitleOn:!1,prioritizeFlash:!1,scrollDuration:1E3};b.fn.turtle.ids={gallery:"gallery",items:"items",folders:"folders",thumbs:"thumbs",navigation:"navigation",scrollbox:"scrollbox",active:"active",parent:"parent",bottom:"bottom",img:"img",main:"main",image:"image",video:"video",audio:"audio",other:"other",wait:"wait",cont:"cont",panel:"panel",icon:"icon",caption:"caption",
meta:"meta",map:"map",mapcont:"mapcont",mapid:"mapid",shop:"shop",shopAll:"shopall",discount:"discount",fotomoto:"fotomoto",mostphotos:"mostphotos",share:"share",shares:"shares",print:"print",comments:"comments",link:"link",custom:"custom",poster:"poster",isoriginal:"isoriginal",content:"content",width:"width",height:"height",src:"src",ext:"ext",thumbExt:"thumbext",regions:"regions",isimage:"isimage",isvideo:"isvideo",isaudio:"isaudio",isother:"isother",modified:"modified",startShow:"startshow",startBtn:"startbtn",
startTxt:"starttxt",controls:"controls",prev:"prev",next:"next",up:"up",noresize:"noresize",resize:"resize",hideInfo:"hideinfo",showInfo:"showinfo",hideThumbs:"hidethumbs",showThumbs:"showthumbs",play:"play",pause:"pause",newItem:"newlabel",showHint:"showhint",kill:"kill",load:"load",toload:"toload",feedback:"feedback",checkbox:"checkbox",selectAll:"selectall",selectNone:"selectnone"};b.fn.turtle.text={startSlideshow:"Start slideshow",close:"Close",atLastPage:"At last page",atLastPageQuestion:"Where to go next?",
startOver:"Start over",backToHome:"Back to home",stop:"Stop",upOneLevel:"Up one level",backToIndex:"Back to index page",previousPicture:"Previous picture",nextPicture:"Next picture",previousFolder:"Previous folder",nextFolder:"Next folder",changeSpeed:"Change speed",oneToOneSize:"1:1 size",fitToScreen:"Fit to screen",showInfo:"Show caption / info",hideInfo:"Hide caption / info",showThumbs:"Show thumbnails",hideThumbs:"Hide thumbnails",startAutoplay:"Start autoplay",stopAutoplay:"Stop autoplay",newItem:"NEW",
clickToOpen:"Click to open this document with the associated viewer",commentsBtn:"Comments",commentsLabel:"Add a comment, view other's comments",metaBtn:"Photo data",metaLabel:"Display photograpic (Exif/Iptc) data",mapBtn:"Map",mapLabel:"Show the photo location on map",shopBtn:"Buy",shopLabel:"Show options to buy this item",shareBtn:"Share",shareLabel:"Share this photo over social sites",download:"Download",original:"Original",hiRes:"Hi res.",saveTip:"Use Right click -> Save link as... to download",
fotomotoBtn:"Buy / Share",fotomotoLabel:"Buy prints or digital files, send free eCard through Fotomoto",mostphotosBtn:"Purchase",mostphotosLabel:"Download this image from <b>mostphotos.com</b>!",people:"People",sendFeedback:"Send feedback",message:"Message",subject:"Subject",comment:"Comment",yourEmail:"Your email address",send:"Send",messageSent:"Message sent",errorSending:"Error sending email!",tooLong:"Text is too long or too many items!",emailMissing:"Email is misssing or wrong!",noItemsSelected:"No items selected!",
selectItemsHint:"Select the desired items first!",nonShoppableItems:"The selected items have no or have proprietary shopping options, or different discount rates.",buyNItems:"Buy {0} items",locationWarning:"Works only when uploaded"}})(jQuery);
